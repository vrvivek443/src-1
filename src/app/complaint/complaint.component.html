<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3" style="padding-top:1px;">
    <div class="breadcrumb-title pe-3">Home</div>
    <div class="ps-3">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0 p-0">
                <li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i>Case Management</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">{{_caseTitle}}</li>
            </ol>

        </nav>
    </div>

</div>

<div id="stepper1" class="bs-stepper linear">
    <div class="card">
        <div class="card-header">
            <div class="d-flex flex-row align-items-center justify-content-between" role="tablist">
                <div class="step active" data-target="#step-l-1">
                    <div class="step-trigger tab-page" role="tab" id="stepper1trigger1" aria-controls="step-l-1"
                        (click)="stepClick(1)" aria-selected="true">
                        <div class="bs-stepper-circle">1</div>
                        <div class="">

                            <h6 class="mb-0 steper-title">Property Info</h6>
                            <!-- <p class="mb-0 steper-sub-title">Property details of the complaint.</p> -->
                        </div>
                    </div>
                </div>
                <div class="bs-stepper-line"></div>
                <div class="step" data-target="#step-l-2">
                    <div class="step-trigger tab-page" role="tab" id="stepper1trigger2" aria-controls="step-l-2"
                        (click)="stepClick(2)" aria-selected="false" disabled="disabled">
                        <div class="bs-stepper-circle">2</div>
                        <div class="">
                            <h6 class="mb-0 steper-title">People Info</h6>
                            <!-- <p class="mb-0 steper-sub-title">Personal information of the reporting person</p> -->
                        </div>
                    </div>
                </div>
                <div class="bs-stepper-line"></div>
                <div class="step" data-target="#step-l-3">
                    <div class="step-trigger tab-page" role="tab" id="stepper1trigger4" aria-controls="step-l-3"
                        (click)="stepClick(3)" aria-selected="false" disabled="disabled">
                        <div class="bs-stepper-circle">3</div>
                        <div class="">
                            <h6 class="mb-0 steper-title">Case Details</h6>
                            <!-- <p class="mb-0 steper-sub-title">Case Details</p> -->
                        </div>
                    </div>
                </div>
                <div class="bs-stepper-line"></div>
                <div class="step" data-target="#step-l-4">
                    <div class="step-trigger tab-page" role="tab" id="stepper1trigger4" aria-controls="step-l-4"
                        (click)="stepClick(4)" aria-selected="false" disabled="disabled">
                        <div class="bs-stepper-circle">4</div>
                        <div class="">
                            <h5 class="mb-0 steper-title">Violations</h5>
                            <!-- <p class="mb-0 steper-sub-title">List of Violation </p> -->
                        </div>
                    </div>
                </div>
                <div class="bs-stepper-line"></div>
                <div class="step" data-target="#step-l-5">
                    <div class="step-trigger tab-page" role="tab" id="stepper1trigger5" aria-controls="step-l-5"
                        (click)="stepClick(5)" aria-selected="false" disabled="disabled">
                        <div class="bs-stepper-circle">5</div>
                        <div class="">
                            <h6 class="mb-0 steper-title">Action Log</h6>
                            <!-- <p class="mb-0 steper-sub-title">List of actions</p> -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12 text-center" id="addressInfo">
                <p class="mb-4" *ngIf="this._viewAddressDetail!=null"><b>Owner Name: </b>
                    {{_viewAddressDetail?.ownerName}},
                    <b>Address:</b> {{_viewAddressDetail?.unitNumber}} {{_viewAddressDetail?.streetNumber}},
                    {{_viewAddressDetail?.streetName}} {{_viewAddressDetail?.streetType}},

                    {{_viewAddressDetail?.ownerCityStateZip}}.
                    <span
                        *ngIf=" this._caseDetail != null || this._caseDetail?.id!= -1 || this._caseDetail?.id!= 0 || this._caseDetail?.id != undefined"
                        class="font-size: xx-large;">
                        <b>Case No:</b>{{_caseDetail?.id}}</span>&nbsp;
                    <b style="margin-right: 5px">Case Status:</b>
                    <button *ngIf="this._canChangeStatus" class="btn custom-btn"
                        (click)="this.changeStatus()">{{getStatusDesc(_caseDetail?.casestatus)}}</button>
                    <span *ngIf="this._canChangeStatus==false">{{getStatusDesc(_caseDetail?.casestatus)}}</span>
                </p>

            </div>
        </div>
        <div class="card-body">
            <div class="bs-stepper-content">
                <form onsubmit="return false">
                    <!-- Address Starts Here -->
                    <div id="step-l-1" role="tabpanel" class="bs-stepper-pane active dstepper-block"
                        aria-labelledby="stepper1trigger1">

                        <div class="card">
                            <div class="card-body">
                                <ul class="nav nav-tabs nav-primary" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <a class="nav-link active" data-bs-toggle="tab" href="#primaryhome" role="tab"
                                            aria-selected="true">
                                            <div class="d-flex align-items-center">
                                                <div class="tab-icon"><i class="bx bx-home font-18 me-1"></i>
                                                </div>
                                                <div class="tab-title">Property Information</div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <a class="nav-link" data-bs-toggle="tab" href="#primaryprofile"
                                            (click)="getCaseHistoryOfSelectedAddressAPN()" role="tab"
                                            aria-selected="false" tabindex="-1">
                                            <div class="d-flex align-items-center">
                                                <div class="tab-icon"><i class="bx bx-user-pin font-18 me-1"></i>
                                                </div>
                                                <div class="tab-title">Case History</div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="nav-item" role="presentation" id="propertyNotesTab">
                                        <a class="nav-link" data-bs-toggle="tab" href="#primaryNotes" role="tab" aria-selected="false" tabindex="-1">
                                            <div class="d-flex align-items-center">
                                                <div class="tab-icon"><i class="bx bx-file font-18 me-1"></i>
                                                </div>
                                                <div class="tab-title">Property Notes</div>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                                <div class="tab-content py-3">
                                    <div class="tab-pane fade show active" id="primaryhome" role="tabpanel">
                                        <div class="col-md-12 col-lg-12  col-xl-12 ">

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6 class="mb-1">Property Information</h6>
                                                    <p class="mb-4"></p>
                                                </div>
                                                <div class="col-md-6">
                                                    <button class="btn custom-btn px-4 float-end btn-sm ms-1"
                                                        id="btnMap" (click)="viewMap()">View
                                                        Map</button>

                                                </div>
                                            </div>

                                            <hr />

                                            <div class="row">
                                                <div class="col-md-12 col-lg-12 d-none col-xl-12 mb-4 " id="googleMap">
                                                    <h6 class="mb-0 text-uppercase">Map</h6>
                                                    <hr />
                                                    <google-map height="400px" width="100%" [center]="center"
                                                        [zoom]="zoom" (mapClick)="moveMap($event)"
                                                        (mapReady)="mapReady($event)" (mapMousemove)="move($event)">
                                                    </google-map>
                                                    <div id="pac-container">
                                                        <input #searchMap id="pac-input" type="text"
                                                            placeholder="Enter a location">
                                                    </div>
                                                </div>
                                                <div class="col-md-12 col-lg-12 col-xl-12">
                                                    <h6 class="mb-0 text-uppercase">Address Details</h6>
                                                    <form class="row g-3" [hidden]="_caseId!=0">
                                                        <div class="col-lg-2 col-md-2 col-sm-12">
                                                            <label for="input1" class="form-label">APN Number</label>
                                                            <input type="text" class="form-control" id="apnNumber"
                                                                name="apnNumber"
                                                                [(ngModel)]="_searchViewModel.apnNumber"
                                                                placeholder="APN">
                                                        </div>
                                                        <div class="col-lg-2 col-md-2 col-sm-12">
                                                            <label for="input1" class="form-label">Apartment
                                                                Number</label>
                                                            <input type="text" class="form-control" id="apartmentNumber"
                                                                name="apartmentNumber"
                                                                [(ngModel)]="_searchViewModel.apartmentNumber"
                                                                placeholder="Apartment Number">
                                                        </div>
                                                        <div class="col-lg-3 col-md-3 col-sm-12">
                                                            <label for="input1" class="form-label">Street Number</label>
                                                            <input type="text" class="form-control" id="streetNumber"
                                                                name="streetNumber"
                                                                [(ngModel)]="_searchViewModel.streetNumber"
                                                                placeholder="Street Number">
                                                        </div>
                                                        <!-- <div class="col-lg-3  col-md-3  col-sm-12">
                                                            <label for="input2" class="form-label">Street Name</label>
                                                            <input type="text" class="form-control" id="streetName"
                                                                name="streetName"
                                                                [(ngModel)]="_searchViewModel.streetName"
                                                                placeholder="Street Name">
                                                        </div> -->
                                                        <div class="col-lg-2  col-md-2  col-sm-12">
                                                            <label for="streetType" class="form-label">Street</label>
                                                            <select id="streetType" name="street" class="form-select"
                                                                data-placeholder="Street Type"
                                                                [(ngModel)]="_searchViewModel.streetType">
                                                                <option *ngFor="let _st of _streetMasterDataList"
                                                                    value={{_st?.id}}>
                                                                    {{_st?.streetname}}{{" "+_st?.streettype}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-2  col-md-2  col-sm-12">
                                                            <button class="btn btn-warning mt-2rem btn-sm ms-1"
                                                                id="btnSearchAddress" (click)="searchAddress()"><i
                                                                    class='bx bx-search-alt'></i>
                                                            </button>
                                                        </div>

                                                    </form>
                                                    <hr />
                                                </div>
                                            </div>


                                            <div class="row">
                                                <div class="col-md-3">
                                                    <ul class="list-group list-group-flush">
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">APN</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.apn}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Unit Number</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.unitNumber}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Owner Name</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.ownerName}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Owner City State Zip</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.ownerCityStateZip}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Owner Street</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.ownerStreet}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Owner Phone</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.ownerPhone}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Other Name</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.otherName}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Street Number</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.streetNumber}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Street Direction</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.streetDirection}}</span>
                                                        </li>


                                                    </ul>
                                                </div>
                                                <div class="col-md-3">
                                                    <ul class="list-group list-group-flush">
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Street Name</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.streetName}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Street Type</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.streetType}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">District</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.district}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">City</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.city}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">State</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.state}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Zip</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.zip}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Census Tract</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.censusTract}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Tax Rate Area</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.taxRateArea}}</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-3">
                                                    <ul class="list-group list-group-flush">
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Map Coordinates</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.mapCoordinates}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">People RSN Amanda</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.peopleRSNAmanda}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">People RSN</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.peopleRSN}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Property RSN Amanda</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.propertyRSNAmanda}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">In Amanda</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.inAmanda}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Amanda District</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.amandaDistrict}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Lot Number</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.lotNo}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Other Address</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.otherAddress}}</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-3">
                                                    <ul class="list-group list-group-flush">

                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Building Permit Number</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.buildingpermitnumber}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Housing Permit Number</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.buildingPermitNumber}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Other City State Zip</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.otherCityStateZip}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Tract Number</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.tractNo}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Property RSN</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.propertyRSN}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Number of Units</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.numberOfUnits}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Comments</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.comments}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Status</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.status}}</span>
                                                        </li>
                                                        <li
                                                            class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                            <h6 class="mb-0">Stamp Date</h6>
                                                            <span
                                                                class="text-secondary">{{_viewAddressDetail?.stampDate}}</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="primaryprofile" role="tabpanel">
                                        <div class="col-md-12 col-lg-12  col-xl-12">

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6 class="mb-0 text-uppercase">Case History</h6>
                                                </div>
                                                <div class="col-md-6">
                                                </div>
                                            </div>
                                            <hr />
                                            <div class="row row-cols-1 row-cols-md-3 row-cols-xl-3 row-cols-xxl-3 mt-2"
                                                id="caseHistoryReport">
                                                <div class="col">
                                                    <div class="card radius-10 bg-gradient-blues ">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="me-auto">
                                                                    <p class="mb-0 text-white">Total Cases</p>
                                                                    <h6 class="my-1 text-white">16</h6>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="card radius-10 bg-gradient-ohhappiness ">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="me-auto">
                                                                    <p class="mb-0 text-white">Closed Cases</p>
                                                                    <h6 class="my-1 text-white">15</h6>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="card radius-10 bg-gradient-burning ">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="me-auto">
                                                                    <p class="mb-0 text-white">Open Case</p>
                                                                    <h6 class="my-1 text-white">01</h6>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="card radius-10 bg-gradient-moonlit">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center" style="color:white">
                                                                <div class="me-auto">
                                                                    <p class="mb-0"># of Violations</p>
                                                                    <h6 class="my-1 text-white">18</h6>

                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="card radius-10 bg-gradient-moonlit">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="me-auto">
                                                                    <p class="mb-0 text-white">Last complaint(Open)</p>
                                                                    <h6 class="my-1 text-white "
                                                                        title="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer ac accumsan dui. Curabitur a mattis est. Donec nec elit non urna ultricies dignissim et eu ipsum. Etiam in sem ac neque sagittis aliquam consectetur in lectus. Sed hendrerit, lectus sit amet semper volutpat, ">
                                                                        Peter - 12/DEC/2023 08:20PM
                                                                    </h6>

                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="card radius-10 bg-gradient-moonlit">
                                                        <div class="card-body">
                                                            <div class="d-flex align-items-center">
                                                                <div class="me-auto">
                                                                    <p class="mb-0 text-white">Last inspector visit -
                                                                        Maria
                                                                        Miller </p>
                                                                    <h6 class="my-1 text-white">On - 02/JAN/2024
                                                                        10:35AM</h6>

                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <table class="table mb-0 table-striped" [dtOptions]="dtoptions"
                                                [dtTrigger]="dtCaseHistoryTrigger" datatable>
                                                <thead>
                                                    <tr>
                                                        <th scope="col">#</th>
                                                        <th scope="col">Program</th>
                                                        <th scope="col">Status</th>
                                                        <th scope="col">Open Date</th>
                                                        <th scope="col">Close Date</th>
                                                        <th scope="col">Inspector</th>

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let _asr of _caseHistoryList">
                                                        <td>{{_asr?.id}}</td>
                                                        <td>{{this.getProgramName(_asr?.programcode)}}</td>
                                                        <td>{{this.getStatusDesc(_asr?.casestatus)}}</td>
                                                        <td>{{_asr?.receiveddate}}</td>
                                                        <td>{{_asr?.closedate}}</td>
                                                        <td>{{this.getInspectorName(_asr?.inspector1id)}}</td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="primaryNotes" role="tabpanel">
                                        <div class="col-lg-12 col-sm-12 mt-3">
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <button class="btn-primary" id="addNewButton" data-bs-toggle="modal" data-bs-target="#addNewModal" *ngIf="isCase">
                                                    <i class="bx bx-plus me-1"></i> Add New
                                                </button>
                                            </div>
                                            <table id="tblnotes"
                                                class="table table-striped table-bordered datatable"
                                                style="width:100%;">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>Notes</th>
                                                        <th>Status</th>
                                                        <th>Created By</th>
                                                        <th>Date</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>  
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 mt-3">
                            <div class="float-end">
                                <button class="btn custom-btn px-4" id="createCaseBtn" (click)="createCase(1)">Create
                                    Case<i class="bx bx-right-arrow-alt ms-2"></i></button>

                                <button class="btn custom-btn px-4" id="nextPersonBtn" style="display:none"
                                    (click)="openPersonTab()">Next <i class="bx bx-right-arrow-alt ms-2"></i></button>
                            </div>
                        </div>
                    </div>
                    <!-- Address Ends Here -->

                    <!-- Person Starts Here -->
                    <div id="step-l-2" role="tabpanel" class="bs-stepper-pane" aria-labelledby="stepper1trigger2">
                        <div class="row">
                            <div class="col-md-6">
                                <h5 class="mb-1">People Info</h5>
                                <p class="mb-4">Reporter and Responsible Person Information</p>
                            </div>
                            <div class="col-md-6">
                                <form class="float-lg-end">
                                    <div class="row row-cols-lg-4 row-cols-xl-auto g-2">
                                        <div class="col">
                                            <div class="position-relative">
                                                <input type="text" class="form-control ps-5"
                                                    (focus)="hideRegisteredCases()" (focusout)="getRegisteredCases()"
                                                    placeholder="Search Person..."> <span
                                                    class="position-absolute top-50 product-show translate-middle-y"><i
                                                        class="bx bx-search"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>


                        <div class="row col-md-12" id="personGrid">


                            <!-- Tabs Starts Here  -->
                            <div>
                                <div>
                                    <ul class="nav nav-tabs nav-primary" role="tablist" id="personList">
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link active" data-bs-toggle="tab" href="#person-list"
                                                id="btnPersonList" role="tab" aria-selected="true">
                                                <div class="d-flex align-items-center">
                                                    <div class="tab-icon"><i class="bx bx-home font-18 me-1"></i>
                                                    </div>
                                                    <div class="tab-title">Home</div>
                                                </div>
                                            </a>
                                        </li>
                                        <li class="nav-item" role="presentation" id="addOrEditPerson">
                                            <a class="nav-link" data-bs-toggle="tab" href="#person-add-edit" role="tab"
                                                id="btnAddOrEditPerson" aria-selected="false" tabindex="-1">
                                                <div class="d-flex align-items-center">
                                                    <div class="tab-icon"><i class="bx bx-user-pin font-18 me-1"></i>
                                                    </div>
                                                    <div class="tab-title">Profile</div>
                                                </div>
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="tab-content py-3">
                                        <div class="tab-pane fade active show" id="person-list" role="tabpanel">
                                            <!-- Person List Starts Here -->
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6 class="mb-0 text-uppercase">List of Person</h6>
                                                </div>
                                                <div class="col-md-6">
                                                    <button class="btn btn-danger btn-sm float-end mb-3"
                                                        *ngIf="this.canEdit()" (click)="removePersonForTable()">Delete
                                                    </button>
                                                    <button class="btn custom-btn btn-sm float-end mb-3 me-1"
                                                        (click)="editPersonForTable()">Edit / View</button>
                                                    <button class="btn custom-btn btn-sm float-end mb-3 me-1"
                                                        *ngIf="this.canEdit()" (click)="addNewPerson()">Add
                                                        New Person</button>
                                                </div>
                                            </div>

                                            <hr />
                                            <table id="personTable" width="100%" class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="min-width:10rem">Type </th>
                                                        <th style="min-width:35rem">Full Name </th>
                                                        <th>Relationship </th>
                                                        <th>Address </th>
                                                        <th>Email </th>
                                                        <th>Phone I </th>
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                            <!-- Person List Ends Here -->
                                        </div>
                                        <div class="tab-pane fade" id="person-add-edit" role="tabpanel">
                                            <!-- Person Add or Edit Starts Here-->
                                            <div class="row g-3">
                                                <form class="row g-3 container" #_casePersonForm="ngForm">
                                                    <div class="row">
                                                        <h6 class="mb-0 text-uppercase">Personal Details</h6>
                                                        <hr />
                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                            <label for="input1" class="form-label">Salutation<span
                                                                    class="text-danger">*</span>
                                                            </label>
                                                            <select id="salutation" name="salutation"
                                                                class="form-select selectcontrol"
                                                                [disabled]="!this.canEdit()"
                                                                [(ngModel)]="_casePersonViewModel.salutation"
                                                                #salutation="ngModel"
                                                                [ngClass]="{'requiredoutline':  isSalClicked}"
                                                                data-placeholder="Salutation"
                                                                (focusout)="salutationFocusoutEvent('Salutation is required')">

                                                                <option *ngFor="let _st of _salutationTypeDataList"
                                                                    value={{_st?.code}}>
                                                                    {{_st?.value}}</option>
                                                            </select>
                                                            <span class="text-danger" *ngIf="isSalClicked">
                                                                Salutation is required<br />
                                                            </span>
                                                        </div>
                                                        <div class="col-lg-3  col-md-12  col-sm-12">
                                                            <label for="input3" class="form-label">First Name<span
                                                                    class="text-danger">*</span></label>
                                                            <input type="text" class="form-control" id="firstname"
                                                                name="firstname" #firstname="ngModel" required
                                                                minlength="2" maxlength="50"
                                                                [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_casePersonViewModel.firstname"
                                                                [ngClass]="{'requiredoutline':(firstname.touched && firstname.invalid) || (firstname.errors?.pattern) || (firstname.errors?.minlength) || (firstname.errors?.maxlength) || isFirstNameHasData }"
                                                                placeholder=" First Name"
                                                                pattern="^[A-Za-z]+[A-Za-z ]*$">
                                                            <div class="error"
                                                                *ngIf="(firstname.touched && firstname.invalid) || isFirstNameHasData">
                                                                <span class="text-danger"
                                                                    *ngIf="firstname.errors?.maxlength">
                                                                    Max Character 50. <br />
                                                                </span>
                                                                <span class="text-danger"
                                                                    *ngIf="firstname.errors?.pattern">
                                                                    First name should contains only characters.<br />
                                                                </span>
                                                                <span class="text-danger"
                                                                    *ngIf="firstname.errors?.minlength">
                                                                    Minimum Character 2.<br />
                                                                </span>
                                                                <span class="text-danger"
                                                                    *ngIf="firstname.errors?.required">
                                                                    {{isFirstNameErrorMessage}}<br />
                                                                </span>
                                                            </div>
                                                            <input type="hidden" class="form-control" id="id" name="id"
                                                                [(ngModel)]="_casePersonViewModel.id">
                                                        </div>
                                                        <div class="col-lg-3  col-md-12  col-sm-12">
                                                            <label for="input3" class="form-label">Middle Name</label>
                                                            <input type="text" class="form-control" id="middlename"
                                                                name="middlename" [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_casePersonViewModel.middlename"
                                                                placeholder="Middle Name">
                                                        </div>
                                                        <div class="col-lg-3  col-md-12  col-sm-12">
                                                            <label for="input3" class="form-label">Last Name<span
                                                                    class="text-danger">*</span></label>
                                                            <input type="text" class="form-control" id="lastname"
                                                                name="lastname" #lastname="ngModel" required
                                                                [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_casePersonViewModel.lastname"
                                                                [ngClass]="{'requiredoutline':(lastname.touched && lastname.invalid) || (lastname.errors?.pattern) || (lastname.errors?.minlength) || (lastname.errors?.maxlength) || isLastNameHasData}"
                                                                placeholder="Last Name">

                                                            <div class="error"
                                                                *ngIf="(lastname.touched && firstname.invalid) || (isLastNameHasData)">
                                                                <span class="text-danger"
                                                                    *ngIf="lastname.errors?.maxlength">
                                                                    Max Character 50. <br />
                                                                </span>
                                                                <span class="text-danger"
                                                                    *ngIf="lastname.errors?.pattern">
                                                                    Last name should contains only characters.<br />
                                                                </span>
                                                                <span class="text-danger"
                                                                    *ngIf="lastname.errors?.minlength">
                                                                    Minimum Character 2.<br />
                                                                </span>
                                                                <span class="text-danger"
                                                                    *ngIf="lastname.errors?.required">
                                                                    {{isLastNameErrorMessage}}<br />
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-3  col-md-6  col-sm-12">
                                                            <label for="input2" class="form-label">Person Type<span
                                                                    class="text-danger">*</span></label>
                                                            <select id="personType" class="form-select selectcontrol"
                                                                name="personType" data-placeholder="Select Person type"
                                                                #persontype="ngModel" [disabled]="!this.canEdit()"
                                                                [(ngModel)]=" _casePersonViewModel.personType"
                                                                [ngClass]="{'requiredoutline':isPersonTypeClicked}"
                                                                (focusout)="personTypeFocusoutEvent('Person Type is required')">
                                                                <option *ngFor="let _st of _personTypeDataList"
                                                                    value={{_st.code}}>
                                                                    {{_st?.value}}</option>
                                                            </select>
                                                            <span class="text-danger" *ngIf="isPersonTypeClicked">
                                                                Person Type is required</span>
                                                        </div>
                                                        <div class="col-lg-3  col-md-6  col-sm-12"
                                                            id="relationshipInput" style="display:none">
                                                            <label for="input2" class="form-label">Relationship<span
                                                                    class="text-danger">*</span></label>
                                                            <select id="relationship" class="form-select selectcontrol"
                                                                name="relationship" [disabled]="!this.canEdit()"
                                                                [(ngModel)]="_casePersonViewModel.relationship"
                                                                #relation data-placeholder="Relationship"
                                                                [ngClass]="{'requiredoutline':isRelationshipTypeClicked}"
                                                                (focusout)="focusoutRelation(_casePersonViewModel.relationship,relation.id)">
                                                                <option *ngFor="let _st of _relationshipTypeDataList"
                                                                    value={{_st.code}}>
                                                                    {{_st?.value}}</option>
                                                            </select>
                                                            <span class="text-danger"
                                                                *ngIf="isRelationshipTypeClicked">Relationship is
                                                                required</span>
                                                        </div>
                                                        <div class="col-lg-3  col-sm-12">
                                                            <label for="input1" class="form-label">Address Line
                                                                1</label>
                                                            <input type="text" class="form-control" id="address1"
                                                                name="address1" [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_casePersonViewModel.address1"
                                                                placeholder="Address Line 1">
                                                        </div>
                                                        <div class="col-lg-3  col-sm-12">
                                                            <label for="input1" class="form-label">Address Line
                                                                2</label>
                                                            <input type="text" class="form-control" id="address2"
                                                                name="address2" [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_casePersonViewModel.address2"
                                                                placeholder="Address Line 2">
                                                        </div>

                                                        <div class="col-lg-3  col-sm-12">
                                                            <label for="input1" class="form-label">City</label>
                                                            <input type="text" class="form-control" id="city"
                                                                [readonly]="!this.canEdit()" name="city"
                                                                [(ngModel)]="_casePersonViewModel.city"
                                                                placeholder="Not Found">
                                                        </div>
                                                        <div class="col-lg-3  col-sm-12">
                                                            <label for="input1" class="form-label">State</label>
                                                            <input type="text" class="form-control" id="state"
                                                                [readonly]="!this.canEdit()" name="state"
                                                                [(ngModel)]="_casePersonViewModel.state"
                                                                placeholder="Not Found">
                                                        </div>
                                                        <div class="col-lg-3  col-sm-12">
                                                            <label for="input1" class="form-label">Zipcode</label>
                                                            <input type="text" class="form-control" id="zip" name="zip"
                                                                [(ngModel)]="_casePersonViewModel.zip"
                                                                [readonly]="!this.canEdit()" placeholder="Not Found">
                                                        </div>
                                                        <div class="col-lg-3  col-sm-12">
                                                            <label for="input1" class="form-label">Email Address</label>
                                                            <input type="text" class="form-control" id="email"
                                                                name="email" [(ngModel)]="_casePersonViewModel.email"
                                                                placeholder="Email Address">
                                                        </div>

                                                        <div class="col-lg-3 col-sm-12">
                                                            <label for="input2" class="form-label">Mobile</label>
                                                            <div class="input-group mb-3">
                                                                <div style="width:84%">
                                                                    <input type="text" class="form-control" id="phone1"
                                                                        name="phone1" [readonly]="!this.canEdit()"
                                                                        [(ngModel)]="_casePersonViewModel.phone1"
                                                                        placeholder="Mobile Number" #phone1
                                                                        (focusout)="focusoutMethod(_casePersonViewModel.phone1,phone1.id)">
                                                                    <!-- (focusout)="focusoutPhone1(_casePersonViewModel.phone1,'Mobile Number Phone Type is mandatory')"> -->
                                                                </div>
                                                                <select class="custom-select form-control"
                                                                    id="phone1type" name="phone1type"
                                                                    [disabled]="!this.canEdit()"
                                                                    [(ngModel)]="_casePersonViewModel.phone1type"
                                                                    [ngClass]="{'inputBorder':isPhone1hasData}">
                                                                    <option selected>...</option>
                                                                    <option *ngFor="let _pt of _phoneTypeDataList"
                                                                        value="{{_pt.code}}">
                                                                        {{_pt?.value}}</option>
                                                                </select>

                                                            </div>
                                                            <span class="text-danger"
                                                                *ngIf="isPhone1hasData">{{isPhone1ErrorMessage}}</span>
                                                        </div>

                                                        <div class="col-lg-3 col-sm-12">
                                                            <label for="input2" class="form-label">Telephone</label>
                                                            <div class="input-group mb-3">
                                                                <div style="width:84%">
                                                                    <input type="text" class="form-control" id="phone2"
                                                                        name="phone2" [readonly]="!this.canEdit()"
                                                                        [(ngModel)]="_casePersonViewModel.phone2"
                                                                        placeholder="Telephone"
                                                                        (focusout)="focusoutPhone2(_casePersonViewModel.phone2,'Telephone phone type is mandatory')">

                                                                </div>
                                                                <select class="custom-select form-control"
                                                                    id="phone2type" name="phone2type"
                                                                    [disabled]="!this.canEdit()"
                                                                    [(ngModel)]="_casePersonViewModel.phone2type"
                                                                    [ngClass]="{'inputBorder':isPhone2hasData}">
                                                                    <option selected>...</option>
                                                                    <option *ngFor="let _pt of _phoneTypeDataList"
                                                                        value="{{_pt.code}}">
                                                                        {{_pt?.value}}</option>
                                                                </select>

                                                            </div>
                                                            <span class="text-danger"
                                                                *ngIf="isPhone2hasData">{{isPhone2ErrorMessage}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12  col-sm-12">
                                                            <label for="input1" class="form-label">Comments</label>
                                                            <textarea id="comment" name="comment"
                                                                [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_casePersonViewModel.comment"
                                                                class="form-control"></textarea>
                                                        </div>
                                                    </div>



                                                    <div class="row">
                                                        <div class="col-lg-12  col-sm-12">
                                                            <span id="errorSummary" class="text-danger">
                                                                <span *ngFor="let _err of _personErrorSummaryList">
                                                                    {{_err?.field}}:{{_err?.error}} <br />
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>

                                                    <hr />
                                                    <div class="row" style="display: none;">
                                                        <div class="col-lg-6  col-sm-12">
                                                            <label for="input1" class="form-label">Responsible Case
                                                                Parties</label>
                                                            <input type="text" class="form-control" id="input1">
                                                        </div>
                                                        <div class="col-lg-6  col-sm-12">
                                                            <label for="input1" class="form-label">SITUS Owner</label>
                                                            <input type="text" class="form-control" id="input1">
                                                        </div>
                                                    </div>

                                                </form>
                                                <div class="row mt-2 mb-3 ">
                                                    <div class="col-md-12">
                                                        <button class="btn custom-btn px-4 btn-sm float-end me-2"
                                                            *ngIf="this.canEdit()"
                                                            (click)="savePerson(_casePersonForm.valid)">Save
                                                            Person</button>
                                                        <button
                                                            class="btn btn-outline-secondary btn-sm px-4 float-end  me-2"
                                                            *ngIf="this.canEdit()" (click)="cancelSavePerson()"><i
                                                                class="bx bx-left-arrow-alt me-2"></i>Cancel</button>
                                                        <button
                                                            class="btn btn-outline-secondary btn-sm px-4 float-end  me-2"
                                                            *ngIf="!this.canEdit()" (click)="cancelSavePerson()"><i
                                                                class="bx bx-left-arrow-alt me-2"></i>Back</button>
                                                    </div>
                                                </div>

                                            </div><!---end row-->


                                            <!-- Person Add or Edit Ends Here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Tabs Ends Here -->

                        </div>



                        <div class="col-12 mt-2 mb-3 " id="navigationPerson">
                            <div class="d-flex justify-content-between gap-3">
                                <button class="btn btn-outline-secondary px-4" (click)="previousTab(2)"><i
                                        class="bx bx-left-arrow-alt me-2"></i>Previous</button>
                                <button class="btn custom-btn px-4" (click)="nextTab(2)">Next<i
                                        class="bx bx-right-arrow-alt ms-2"></i></button>
                            </div>
                        </div>

                    </div>
                    <!-- Person Ends Here -->
                    <!-- Case Details Starts Here -->
                    <div id="step-l-3" role="tabpanel" class="bs-stepper-pane" aria-labelledby="stepper1trigger3">
                        <h5 class="mb-1">Case Details</h5>
                        <p class="mb-4">Case Details, Program and Inspector assignment</p>
                        <form>

                        </form>
                        <div class="row g-3">
                            <div class="row">
                                <div class="col-lg-12  col-sm-12">
                                    <label for="input1" class="form-label">Complaint Description</label>
                                    <textarea id="description" name="description" [readonly]="!this.canEdit()"
                                        [(ngModel)]="_caseDetailViewModel.description" class="form-control"></textarea>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <label for="input1" class="form-label">Source<span class="text-danger">*</span></label>
                                <select id="sourcecode" name="sourcecode" [(ngModel)]="_caseDetailViewModel.sourcecode"
                                    #sourcecode="ngModel" (focusout)="focusoutMethod(sourcecode.name, sourcecode.value)"
                                    class="form-select selectcontrol" [disabled]="!this.canEdit()"
                                    [ngClass]="{'requiredoutline':  isCaseDetailSourceCode}" data-placeholder="Source">
                                    <option *ngFor="let _ct of _sourceDataList" value="{{_ct.code}}">
                                        {{_ct?.value}}</option>
                                </select>

                                <span class="text-danger"
                                    *ngIf="isCaseDetailSourceCode">{{casedetailSourceCodeMessage}}<br /></span>
                            </div>
                            <div class="col-12 col-lg-3 col-md-6 col-sm-12">
                                <label for="Experience1" class="form-label">Received Date</label>
                                <input type="date" class="form-control" id="receiveddate" name="receiveddate"
                                    [readonly]="!this.canEdit()" [(ngModel)]="_caseDetailViewModel.receiveddate"
                                    data-placeholder="Received Date">
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <label for="input1" class="form-label">Program<span class="text-danger">*</span></label>
                                <select id="programcode" name="programcode" [disabled]="!this.canEdit()"
                                    [(ngModel)]="_caseDetailViewModel.programcode" class="form-select selectcontrol"
                                    [ngClass]="{'requiredoutline':  isCaseDetailProgramCode}" #programcode="ngModel"
                                    (change)="onProgramCodeChange($event)" data-placeholder="Program"
                                    (focusout)="focusoutMethod(programcode.name,programcode.value)">

                                    <option *ngFor="let _pt of _programTypeDataList" value="{{_pt.code}}">
                                        {{_pt?.value}}</option>
                                </select>
                                <span class="text-danger"
                                    *ngIf="isCaseDetailProgramCode">{{casedetailProgramCodeMessage}}<br /></span>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <label for="input1" class="form-label">Primary
                                    Inspector<span style="color:red">{{_primaryInspectorAssignment}}</span></label>
                                <select id="inspector1id" name="inspector1id" [disabled]="!this.canEdit()"
                                    [(ngModel)]="_caseDetailViewModel.inspector1id" class="form-select selectcontrol"
                                    data-placeholder="Primary Inspector">
                                    <option *ngFor="let _pt of _inspectorList" value="{{_pt.id}}">
                                        {{_pt?.name}}</option>
                                </select>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <label for="input1" class="form-label">Secondary Inspector<span
                                        style="color:red">{{_secondaryInspectorAssignment}}</span></label>
                                <select id="inspector2id" name="inspector2id" [disabled]="!this.canEdit()"
                                    [(ngModel)]="_caseDetailViewModel.inspector2id" class=" form-select selectcontrol"
                                    data-placeholder="Secondary Inspector">

                                    <option *ngFor="let _pt of _inspectorList" value="{{_pt.id}}">
                                        {{_pt?.name}}</option>
                                </select>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <label for="input1" class="form-label">Disposition</label>
                                <select id="dispositioncode" name="dispositioncode"
                                    [(ngModel)]="_caseDetailViewModel.dispositioncode" [disabled]="!this.canEdit()"
                                    class="form-select selectcontrol" #dispositioncode="ngModel"
                                    [ngClass]="{'requiredoutline':  isCaseDetailDispositionCode}"
                                    (focusout)="focusoutMethod(dispositioncode.name,dispositioncode.value)"
                                    data-placeholder="Disposition">

                                    <option *ngFor="let _st of _dispositionTypeDataList" value="{{_st.code}}">
                                        {{_st?.value}}</option>
                                </select>
                                <span class="text-danger"
                                    *ngIf="isCaseDetailDispositionCode">{{casedetailDispositionCodeMessage}}<br /></span>
                            </div>

                            <div class="col-lg-3  col-md-6  col-sm-12">
                                <label for="input2" class="form-label">Priority<span
                                        class="text-danger">*</span></label>
                                <select id="prioritycode" name="prioritycode" #prioritycode="ngModel"
                                    [ngClass]="{'requiredoutline':  isCaseDetailPriorityCode}"
                                    [disabled]="!this.canEdit()" [(ngModel)]="_caseDetailViewModel.prioritycode"
                                    class="form-select selectcontrol" data-placeholder="Priority"
                                    (focusout)="focusoutMethod(prioritycode.name,prioritycode.value)">

                                    <option *ngFor="let _st of _priorityTypeDataList" value="{{_st.code}}">
                                        {{_st?.value}}</option>
                                </select>
                                <span class="text-danger"
                                    *ngIf="isCaseDetailPriorityCode">{{casedetailPriorityCodeMessage}}<br /></span>
                            </div>


                            <div class="col-3">
                                <label for="cdbgcasetype" class="form-label">CBDG Case Type</label>
                                <select id="cdbgcasetype" name="cdbgcasetype" [disabled]="!this.canEdit()"
                                    class="form-control" [(ngModel)]="_caseDetailViewModel.cdbgcasetype"
                                    placeholder="Case" multiple>
                                    <option *ngFor="let _st of _cdbgDataList" value="{{_st.code}}">
                                        {{_st?.value}}</option>
                                </select>
                            </div>

                            <div class="col-12 col-lg-3   col-md-6  ">
                                <label for="CUDate" class="form-label">C/U Date</label>
                                <input type="date" class="form-control" id="cudate" name="cudate"
                                    [readonly]="!this.canEdit()" [(ngModel)]="_caseDetailViewModel.cudate"
                                    (change)="changeCUDate()"
                                    placeholder="C/U Date" >
                            </div>
                            <div class="col-12 col-lg-3  col-md-6  ">
                                <label for="coreservicecode" class="form-label">Core Services Type</label>
                                <select id="coreservicecode" name="coreservicecode" #coreservicecode="ngModel"
                                    [ngClass]="{'requiredoutline':  isCaseDetailCoreserviceCode}"
                                    [(ngModel)]="_caseDetailViewModel.coreservicecode" [disabled]="!this.canEdit()"
                                    class="form-select selectcontrol" data-placeholder="Core Services"
                                    (focusout)="focusoutMethod(coreservicecode.name,coreservicecode.value)">

                                    <option *ngFor="let _cst of _coreServiceTypeDataList" value="{{_cst.code}}">
                                        {{_cst?.value}}</option>
                                </select>
                                <span class="text-danger"
                                    *ngIf="isCaseDetailCoreserviceCode">{{casedetailCoreserviceCodeMessage}}<br /></span>
                            </div>
                            <div class="col-lg-3  col-md-12  col-sm-12">
                                <label for="input3" class="form-label">Status</label>

                                <input type="text" class="form-control" id="casestatus" name="casestatus" readonly
                                    value="{{getStatusDesc(_caseDetailViewModel.casestatus)}}" />
                                <span class="text-danger"
                                    *ngIf="isCaseDetailStatus">{{casedetailStatusMessage}}<br /></span>
                            </div>
                            <div class="col-md-12">

                                <div class="row">
                                    <div class="col-lg-12  col-sm-12" *ngIf="!isErrorShowMsg">
                                        <span id="errorSummary" class="text-danger">
                                            <span *ngFor="let _err of _caseDetailErrorSummary">
                                                {{_err?.field}}:{{_err?.error}} <br />
                                            </span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">

                                <div class="row">
                                    <div class="col-lg-12  col-sm-12">
                                        <!-- <span id="cuDateComments">
                                        </span> -->
                                        <h5>Reason</h5>
                                        <table id="tblreason"
                                                class="table table-striped table-bordered datatable"
                                                style="width:100%;">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>Reason</th>
                                                        <th>Created On</th>
                                                        <th>Created By</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-2 mb-3 ">
                                <div class="col-md-12">
                                    <button class="btn custom-btn px-4 btn-sm float-end me-2"
                                        (click)="saveCaseDetail(null)">Save Case Detail</button>
                                </div>
                            </div>

                            <div class="col-12">
                                <div class="d-flex justify-content-between gap-3">
                                    <button class="btn btn-outline-secondary px-4" (click)="previousTab(3)"><i
                                            class="bx bx-left-arrow-alt me-2"></i>Previous</button>
                                    <button class="btn custom-btn px-4" (click)="nextTab(3)">Next<i
                                            class="bx bx-right-arrow-alt ms-2"></i></button>
                                </div>
                            </div>
                        </div><!---end row-->

                    </div>
                    <!-- Case Details Ends Here -->
                    <!-- Violation Starts Here -->
                    <div id="step-l-4" role="tabpanel" class="bs-stepper-pane" aria-labelledby="stepper1trigger4">
                        <div class="row">
                            <div class="col-md-6">
                                <h5 class="mb-1">Violation Assignment</h5>
                                <p class="mb-4">Assigning Violation to the Case</p>
                            </div>
                            <div class="col-md-6 ">

                            </div>
                        </div>


                        <div class="row g-3">


                            <div>
                                <div>
                                    <ul class="nav nav-tabs nav-primary" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link active" data-bs-toggle="tab" href="#violation-list"
                                                role="tab" aria-selected="true">
                                                <div class="d-flex align-items-center">
                                                    <div class="tab-icon"><i class="bx bx-home font-18 me-1"></i>
                                                    </div>
                                                    <div class="tab-title">Violation List</div>
                                                </div>
                                            </a>
                                        </li>
                                        <li class="nav-item" role="presentation" id="addOrEditViolation">
                                            <a class="nav-link" data-bs-toggle="tab" href="#violation-add-edit"
                                                role="tab" aria-selected="false" tabindex="-1">
                                                <div class="d-flex align-items-center">
                                                    <div class="tab-icon"><i class="bx bx-user-pin font-18 me-1"></i>
                                                    </div>
                                                    <div class="tab-title">Add or Edit Violation</div>
                                                </div>
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="tab-content py-3">
                                        <div class="tab-pane fade show active" id="violation-list" role="tabpanel">
                                            <div class="col-lg-12  col-md-12  col-sm-12">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <h6 class="mb-0 text-uppercase">List of Violations</h6>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <button class="btn custom-btn px-4 float-end btn-sm ms-1"
                                                            *ngIf="this.canEdit()" (click)="addNewViolation()">Add New
                                                            Violation</button>
                                                    </div>
                                                </div>
                                                <hr />
                                                <table id="violationTbl" width="100%" class="table">
                                                    <thead>
                                                        <tr>
                                                            <th># </th>
                                                            <th>Violation Category </th>
                                                            <th>Violation Code </th>
                                                            <!-- <th>Short Description </th> -->
                                                            <th scope="col">Corrective Action </th>
                                                            <th scope="col">Status </th>
                                                            <th scope="col">Actions </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>

                                                    </tbody>
                                                </table>

                                                <!-- <table style="width:100%!important" class="table mb-0 table-striped"
                                                    [dtOptions]="dtoptions" [dtTrigger]="dtTrigger" datatable>
                                                    <thead>
                                                        <tr>
                                                            <th scope="col">#</th>
                                                            <th>Violation Category</th>
                                                            <th>Violation Code</th>
                                                            <th>Short Description</th>
                                                            <th scope="col">Corrective Action</th>
                                                            <th scope="col">Status</th>
                                                            <th scope="col">Actions</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr
                                                            *ngFor="let _cv of _caseDetail?.caseViolation; let i = index">
                                                            <td><a href="">{{i+1}}</a></td>
                                                            <td>{{_cv?.violation}}</td>
                                                            <td>{{_cv?.municode}}</td>
                                                            <td>{{_cv?.description}}</td>
                                                            <td>{{_cv?.correctiveaction}}</td>
                                                            <td>{{this.getViolationStatusName(_cv?.violationstatus)}}
                                                            </td>
                                                            <td>
                                                                <button id="btnEdit" class="btn custom-btn btn-sm"
                                                                    (click)="editViolation(_cv)">Edit/View</button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table> -->
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="violation-add-edit" role="tabpanel">

                                            <div id="frmViolation" class="row">
                                                <div class="col-lg-3  col-md-6  col-sm-12">
                                                    <h6 class="mb-0 text-uppercase">Add or Edit Violation</h6>
                                                    <hr />
                                                    <div class="col-lg-12 col-md-12 col-sm-12 mt-1 mb-1">
                                                        <input type="text" class="form-control" id="input1"
                                                            name="searchText" [(ngModel)]="searchText"
                                                            (keyup)="search()" placeholder="Search Violation . . .">
                                                    </div>
                                                    <div id="violationList"
                                                        style="height:400px;max-height: 400px;overflow-y: scroll;"
                                                        class="demo">
                                                    </div>
                                                </div>
                                                <div class="col-lg-9  col-md-6  col-sm-12">
                                                    <h6 class="mb-0 text-uppercase">Violation Details</h6>
                                                    <hr />
                                                    <form class="row g-3">
                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                            <label for="input1" class="form-label">Violation</label>
                                                            <input type="text" class="form-control" id="violation"
                                                                name="violation" [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_caseViolationViewModel.violation"
                                                                placeholder="violation" />
                                                            <input type="hidden" class="form-control" id="id"
                                                                name="id" />
                                                        </div>

                                                        <div class="col-lg-3  col-md-12  col-sm-12">
                                                            <label for="input3" class="form-label">Muni Code<span
                                                                    class="text-danger">*</span></label>
                                                            <input type="text" class="form-control" id="municode"
                                                                name="municode" #municode="ngModel" required
                                                                [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_caseViolationViewModel.municode"
                                                                [ngClass]="{'requiredoutline':(municode.touched && municode.invalid) || (municode.errors?.pattern) || (municode.errors?.minlength) || (municode.errors?.maxlength) || isMunicodeHasData}"
                                                                placeholder="Muni Code"
                                                                (focusout)="focusoutMethod(municode.name,municode.value)">
                                                            <span class="text-danger"
                                                                *ngIf="((isMunicodeHasData) || (municode.touched && municode.invalid))">{{municodeErrorMessage}}<br /></span>

                                                        </div>
                                                        <div class="col-lg-3  col-sm-12">
                                                            <label for="input1" class="form-label">Area</label>
                                                            <select id="area" name="area"
                                                                [(ngModel)]="_caseViolationViewModel.area"
                                                                [disabled]="!this.canEdit()"
                                                                class="form-select selectcontrol"
                                                                data-placeholder="Area">
                                                                <option *ngFor="let _at of _areaTypeDataList"
                                                                    value={{_at?.code}}>
                                                                    {{_at?.value}}</option>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-3  col-sm-12">
                                                            <label for="input1" class="form-label">Priority</label>
                                                            <select id="priority" name="priority"
                                                                [(ngModel)]="_caseViolationViewModel.priority"
                                                                [disabled]="!this.canEdit()"
                                                                class="form-select selectcontrol"
                                                                data-placeholder="Priority">
                                                                <option *ngFor="let _pty of _priorityTypeDataList"
                                                                    value={{_pty?.code}}>
                                                                    {{_pty?.value}}</option>
                                                            </select>
                                                        </div>

                                                        <div class="col-lg-3  col-md-12  col-sm-12">
                                                            <label for="input3" class="form-label">Open Date</label>
                                                            <input type="date" class="form-control" id="opendate"
                                                                name="opendate" [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_caseViolationViewModel.opendate"
                                                                placeholder="Open Date">
                                                        </div>
                                                        <div class="col-lg-3  col-md-12  col-sm-12">
                                                            <label for="input3" class="form-label">Due Date</label>
                                                            <input type="date" class="form-control" id="duedate"
                                                                name="duedate" [readonly]="!this.canEdit()"
                                                                (change)="changeCheck()"
                                                                [(ngModel)]="_caseViolationViewModel.duedate"
                                                                placeholder="Due Date">
                                                        </div>
                                                        <div class="col-lg-3  col-md-12  col-sm-12">
                                                            <label for="input3" class="form-label">Close Date</label>
                                                            <input type="date" class="form-control" id="closedate"
                                                                name="closedate" [readonly]="!this.canEdit()"
                                                                [(ngModel)]="_caseViolationViewModel.closedate"
                                                                placeholder="Close Date">
                                                        </div>
                                                        <div class="col-lg-3  col-md-6  col-sm-12">
                                                            <label for="input2" class="form-label">Status</label>
                                                            <select id="violationstatus" name="violationstatus"
                                                                class="form-select selectcontrol"
                                                                [disabled]="!this.canEdit()"
                                                                [(ngModel)]="_caseViolationViewModel.violationstatus"
                                                                data-placeholder="Status">
                                                                <option
                                                                    *ngFor="let _pty of _violationStatusTypeDataList"
                                                                    value={{_pty?.code}}>
                                                                    {{_pty?.value}}</option>
                                                            </select>
                                                        </div>
                                                    </form>
                                                    <div class="col-lg-12  col-md-12  col-sm-12">
                                                        <label for="input2" class="form-label">Description<span
                                                                class="text-danger">*</span></label>
                                                        <textarea type="text" class="form-control" id="description"
                                                            name="description" #description="ngModel" required
                                                            [readonly]="!this.canEdit()"
                                                            [(ngModel)]="_caseViolationViewModel.description"
                                                            [ngClass]="{'requiredoutline':(description.touched && description.invalid) || (description.errors?.pattern) || (description.errors?.minlength) || (description.errors?.maxlength) || isDescriptionHasData}"
                                                            placeholder=""
                                                            (focusout)="focusoutMethod(description.name,description.value)"> </textarea>
                                                        <span class="text-danger"
                                                            *ngIf="((isDescriptionHasData) || (description.touched && description.invalid))">{{descriptionErrorMessage}}<br /></span>
                                                    </div>
                                                    <div class="col-lg-12  col-md-12  col-sm-12">
                                                        <label for="input2" class="form-label">Corrective
                                                            Actions<span class="text-daner">*</span></label>
                                                        <textarea type="text" class="form-control" id="correctiveaction"
                                                            name="correctiveaction" required #correctiveaction="ngModel"
                                                            [readonly]="!this.canEdit()"
                                                            [(ngModel)]="_caseViolationViewModel.correctiveaction"
                                                            [ngClass]="{'requiredoutline':(correctiveaction.touched && correctiveaction.invalid) || (correctiveaction.errors?.pattern) || (correctiveaction.errors?.minlength) || (correctiveaction.errors?.maxlength) || isCorrectiveActionHasData}"
                                                            placeholder=""
                                                            (focusout)="focusoutMethod(correctiveaction.name,correctiveaction.value)"> </textarea>
                                                        <span class="text-danger"
                                                            *ngIf="((isCorrectiveActionHasData) || (correctiveaction.touched && correctiveaction.invalid))">{{correctiveActionErrorMessage}}<br /></span>
                                                    </div>
                                                    <br />
                                                    <div class="row">
                                                        <!-- <label><b>Violation error message:</b></label> -->
                                                        <span class="text-danger"
                                                            *ngFor="let _ves of _violationErrorSummary">
                                                            {{_ves}}<br />
                                                        </span>

                                                    </div>
                                                    <div class="col-12 mt-3 mb-3">
                                                        <div class="d-flex justify-content-between gap-3">
                                                            <button
                                                                class="btn btn-outline-secondary btn-sm px-4 float-end  me-2"
                                                                (click)="cancelViolation()"><i
                                                                    class="bx bx-left-arrow-alt me-2"></i>Cancel</button>
                                                            <button class="btn custom-btn px-4" *ngIf="this.canEdit()"
                                                                (click)="saveViolation()">
                                                                Save</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>




                            <div class="col-12" id="navigationViolation">
                                <div class="d-flex justify-content-between gap-3">
                                    <button class="btn btn-outline-secondary px-4" (click)="previousTab(4)"><i
                                            class="bx bx-left-arrow-alt me-2"></i>Previous</button>
                                    <button class="btn custom-btn px-4" (click)="nextTab(4)">Next<i
                                            class="bx bx-right-arrow-alt ms-2"></i></button>
                                </div>
                            </div>
                        </div><!---end row-->

                    </div>
                    <!-- Violation Ends Here -->
                    <!-- Action Starts Here -->
                    <div id="step-l-5" role="tabpanel" class="bs-stepper-pane" aria-labelledby="stepper1trigger5">
                        <h5 class="mb-1">Action Logs</h5>
                        <p class="mb-4"></p>

                        <div class="row g-3">

                            <div>
                                <div>
                                    <ul class="nav nav-tabs nav-primary" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link active" data-bs-toggle="tab" href="#action-list"
                                                role="tab" aria-selected="true">
                                                <div class="d-flex align-items-center">
                                                    <div class="tab-icon"><i class="bx bx-run font-18 me-1"></i>
                                                    </div>
                                                    <div class="tab-title">Action List</div>
                                                </div>
                                            </a>
                                        </li>
                                        <li class="nav-item" role="presentation" id="addOrEditAction">
                                            <a class="nav-link" data-bs-toggle="tab" href="#action-add-edit" role="tab"
                                                aria-selected="false" tabindex="-1">
                                                <div class="d-flex align-items-center">
                                                    <div class="tab-icon"><i class="bx bxs-edit font-18 me-1"></i>
                                                    </div>
                                                    <div class="tab-title">Add or Edit Action</div>
                                                </div>
                                            </a>
                                        </li>

                                    </ul>
                                    <div class="tab-content py-3">
                                        <div class="tab-pane fade show active" id="action-list" role="tabpanel">
                                            <div class="row" id="actionGrid">
                                                <div class="col-lg-12  col-md-12  col-sm-12">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <h6 class="mb-0 text-uppercase">List of Actions</h6>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <button class="btn custom-btn px-4 float-end btn-sm ms-1"
                                                                *ngIf="this.canEdit()" (click)="addNewActionLog()">Add
                                                                New
                                                                Action Log</button>
                                                        </div>
                                                    </div>
                                                    <hr />

                                                    <table id="actionsTbl" width="100%" class="table">
                                                        <thead>
                                                            <tr>
                                                                <th># </th>
                                                                <th>Action</th>
                                                                <th>Date/Time</th>
                                                                <th>Route to User</th>
                                                                <th>Type Comments</th>
                                                                <th>Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                        </tbody>
                                                    </table>
                                                    <hr />
                                                    <!-- <table class="table mb-0 " width="100%"
                                                        class="table  mb-0 table-striped" [dtOptions]="dtActionOptions"
                                                        [dtTrigger]="dtActionTrigger" datatable
                                                        style="width:100%!important">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">#</th>
                                                                <th>Action</th>
                                                                <th>Date/Time</th>
                                                                <th>Route to User</th>
                                                                <th>Action Comments</th>
                                                                <th>Type Comments</th>
                                                                <th>Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr
                                                                *ngFor="let _cv of _caseDetail?.caseActions; let i = index">
                                                                <td><a style="cursor: pointer;"
                                                                        (click)="showActionComments(_cv?.id)">{{i+1}}</a>
                                                                </td>
                                                                <td>{{getActionName(_cv.actionCode)}}</td>
                                                                <td>{{_cv?.createdOn}}</td>
                                                                <td>{{getInspectorName(_cv?.routeToInspectorId)}}
                                                                </td>
                                                                <td>{{_cv?.comments}}
                                                                </td>
                                                                <td>{{(_cv?.actionType=="A" ||
                                                                    _cv?.actionType=="T")?'Sub:'+_cv?.subject:(_cv?.actionType=="C"?_cv?.citiationComments:"")}}<br />
                                                                    {{(_cv?.actionType=="A")?'Location:'+_cv?.location:""}}
                                                                </td>
                                                                <td>
                                                                    <button class="btn custom-btn btn-sm mb-3 me-1"
                                                                        (click)="editAction(_cv)">Edit / View</button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table> -->
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="action-add-edit" role="tabpanel">
                                            <div id="frmActionLog" class="row">
                                                <div class="col-lg-12  col-md-12  col-sm-12">

                                                </div>


                                                <div class="card">
                                                    <div class="card-body">
                                                        <ul class="nav nav-tabs nav-primary" role="tablist">
                                                            <li class="nav-item" role="presentation">
                                                                <a class="nav-link active" data-bs-toggle="tab"
                                                                    href="#actionAddOrEdit" role="tab"
                                                                    aria-selected="true">
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="tab-icon"><i
                                                                                class="bx bx-cycling font-18 me-1"></i>
                                                                        </div>
                                                                        <div class="tab-title">Action Item</div>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item" role="presentation"
                                                                id="citationDetails">
                                                                <a class="nav-link" data-bs-toggle="tab"
                                                                    href="#citationDetail" role="tab"
                                                                    aria-selected="false">
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="tab-icon"><i
                                                                                class="bx bx-radio font-18 me-1"></i>
                                                                        </div>
                                                                        <div class="tab-title">Citation Details</div>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item" role="presentation" id="taskDetails">
                                                                <a class="nav-link" data-bs-toggle="tab"
                                                                    href="#taskDetail" role="tab" aria-selected="false">
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="tab-icon"><i
                                                                                class="bx bx-radio font-18 me-1"></i>
                                                                        </div>
                                                                        <div class="tab-title">Task Information</div>
                                                                    </div>
                                                                </a>
                                                            </li>

                                                            <li class="nav-item" role="presentation"
                                                                id="appointmentInformations">
                                                                <a class="nav-link" data-bs-toggle="tab"
                                                                    href="#appointmentInformation" role="tab"
                                                                    aria-selected="false">
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="tab-icon"><i
                                                                                class="bx bx-radio font-18 me-1"></i>
                                                                        </div>
                                                                        <div class="tab-title">Appointment Information
                                                                        </div>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item" role="presentation" id="picture">
                                                                <a class="nav-link" data-bs-toggle="tab"
                                                                    href="#pictureContent" role="tab"
                                                                    aria-selected="false">
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="tab-icon"><i
                                                                                class="bx bx-radio font-18 me-1"></i>
                                                                        </div>
                                                                        <div class="tab-title">Picture
                                                                        </div>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item" role="presentation" id="audio">
                                                                <a class="nav-link" data-bs-toggle="tab"
                                                                    href="#audioContent" role="tab"
                                                                    aria-selected="false">
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="tab-icon"><i
                                                                                class="bx bx-radio font-18 me-1"></i>
                                                                        </div>
                                                                        <div class="tab-title">Audio
                                                                        </div>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item" role="presentation" id="video">
                                                                <a class="nav-link" data-bs-toggle="tab"
                                                                    href="#videoContent" role="tab"
                                                                    aria-selected="false">
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="tab-icon"><i
                                                                                class="bx bx-radio font-18 me-1"></i>
                                                                        </div>
                                                                        <div class="tab-title">Video
                                                                        </div>
                                                                    </div>
                                                                </a>
                                                            </li>


                                                            <li class="nav-item" role="presentation"
                                                                id="inspectionViolation">
                                                                <a class="nav-link" data-bs-toggle="tab"
                                                                    href="#inspectionViolationContent" role="tab"
                                                                    aria-selected="false">
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="tab-icon"><i
                                                                                class='bx bx-user-pin font-18 me-1'></i>
                                                                        </div>
                                                                        <div class="tab-title">Violation</div>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                            <li class="nav-item" role="presentation"
                                                                id="followUpAction">
                                                                <a class="nav-link" data-bs-toggle="tab"
                                                                    href="#followUpActionContent" role="tab"
                                                                    aria-selected="false">
                                                                    <div class="d-flex align-items-center">
                                                                        <div class="tab-icon"><i
                                                                                class='bx bx-microphone font-18 me-1'></i>
                                                                        </div>
                                                                        <div class="tab-title">Follow-up Action</div>
                                                                    </div>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                        <div class="tab-content py-3">
                                                            <div class="tab-pane fade show active" id="actionAddOrEdit"
                                                                role="tabpanel">
                                                                <div class="col-lg-12  col-md-12  col-sm-12">
                                                                    <hr />
                                                                    <form class="row g-3">
                                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                                            <label for="input1"
                                                                                class="form-label">Actions</label>
                                                                            <select id="actionCode" name="actionCode"
                                                                                [(ngModel)]="_actionLogViewModel.actionCode"
                                                                                class="form-select"
                                                                                [disabled]="!this.canEdit()"
                                                                                (change)="actionOnChange($event)"
                                                                                data-placeholder="Actions">
                                                                                <option
                                                                                    *ngFor="let _at of _actionListDataList"
                                                                                    value="{{_at?.actionCode}}">
                                                                                    {{_at?.actionDescription}}</option>
                                                                            </select>
                                                                            <input type="hidden" class="form-control"
                                                                                id="id" name="id" />
                                                                        </div>

                                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                                            <label for="input1"
                                                                                class="form-label">Category</label>
                                                                            <select id="actionType" name="actionType"
                                                                                [(ngModel)]="_actionLogViewModel.actionType"
                                                                                class="form-select"
                                                                                [disabled]="!this.canEdit()"
                                                                                (change)="categoryOnChange($event)"
                                                                                data-placeholder="Category">
                                                                                <option
                                                                                    *ngFor="let _at of _actionTypeDataList"
                                                                                    value="{{_at?.code}}">
                                                                                    {{_at?.value}}</option>
                                                                            </select>
                                                                        </div>

                                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                                            <label for="input1" class="form-label">Route
                                                                                To</label>
                                                                            <select id="routeToInspectorId"
                                                                                name="routeToInspectorId"
                                                                                [disabled]="!this.canEdit()"
                                                                                [(ngModel)]="_actionLogViewModel.routeToInspectorId"
                                                                                class="form-select"
                                                                                data-placeholder="Inspector">
                                                                                <option
                                                                                    *ngFor="let _rtu of _inspectorList"
                                                                                    value="{{_rtu.id}}">
                                                                                    {{_rtu?.name}}</option>
                                                                            </select>
                                                                        </div>

                                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                                            <label for="input1"
                                                                                class="form-label">Date</label>
                                                                            <input type="date" class="form-control"
                                                                                [readonly]="!this.canEdit()"
                                                                                id="createdOn" name="createdOn"
                                                                                [(ngModel)]="_actionLogViewModel.createdOn"
                                                                                value="{{getActionDate(_actionLogViewModel.createdOn)}}" />
                                                                        </div>

                                                                        <div class="col-lg-3 col-md-6 col-sm-12"
                                                                            [hidden]="_actionLogViewModel.actionType!='F'">
                                                                            <label for="input1"
                                                                                class="form-label">File</label>
                                                                            <input type="file" class="form-control"
                                                                                id="uploadFile" name="uploadFile"
                                                                                capture="camera"
                                                                                (change)="onFileChange($event)" />
                                                                        </div>



                                                                        <div class="col-lg-12  col-md-12  col-sm-12">
                                                                            <label for="input2"
                                                                                class="form-label">Comments</label>
                                                                            <textarea type="text" class="form-control"
                                                                                id="comments" name="comments"
                                                                                [(ngModel)]="_actionLogViewModel.comments"> </textarea>
                                                                        </div>
                                                                    </form>


                                                                </div>
                                                            </div>
                                                            <div class="tab-pane fade" id="citationDetail"
                                                                role="tabpanel">
                                                                <!-- Citation Starts Here -->

                                                                <h6 class="mb-0 text-uppercase">Citation Details</h6>
                                                                <hr />
                                                                <form class="row g-3">
                                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                                        <label for="input1" class="form-label">Citation
                                                                            #</label>
                                                                        <input type="text" class="form-control"
                                                                            id="citiationNo" name="citiationNo"
                                                                            [(ngModel)]="_citationViewModel.citiationNo"
                                                                            placeholder="Citation Number" />
                                                                        <input type="hidden" class="form-control"
                                                                            id="id" name="id" />
                                                                    </div>

                                                                    <div class="col-lg-3  col-md-12  col-sm-12">
                                                                        <label for="input3" class="form-label">Citation
                                                                            Date</label>
                                                                        <input type="date" class="form-control"
                                                                            id="citiationDate" name="citiationDate"
                                                                            [(ngModel)]="_citationViewModel.citiationDate"
                                                                            placeholder="Citation Date">
                                                                    </div>
                                                                    <div class="col-lg-3  col-md-12  col-sm-12">
                                                                        <label for="input3" class="form-label">Muni
                                                                            Code</label>
                                                                        <input type="text" class="form-control"
                                                                            id="municode" name="municode"
                                                                            [(ngModel)]="_citationViewModel.municode"
                                                                            placeholder="Municode">
                                                                    </div>

                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1"
                                                                            class="form-label">FFUND</label>
                                                                        <input type="text" class="form-control"
                                                                            id="ffund" name="ffund"
                                                                            [(ngModel)]="_citationViewModel.ffund"
                                                                            placeholder="FFUND">
                                                                    </div>
                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1" class="form-label">License
                                                                            Number</label>
                                                                        <input type="text" class="form-control"
                                                                            id="ffund" name="ffund"
                                                                            [(ngModel)]="_citationViewModel.licenseno"
                                                                            placeholder="License Number">
                                                                    </div>
                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1"
                                                                            class="form-label">FDEPT</label>
                                                                        <input type="text" class="form-control"
                                                                            id="fdept" name="fdept"
                                                                            [(ngModel)]="_citationViewModel.fdept"
                                                                            placeholder="FDEPT">
                                                                    </div>
                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1"
                                                                            class="form-label">FRC</label>
                                                                        <input type="text" class="form-control" id="frc"
                                                                            name="frc"
                                                                            [(ngModel)]="_citationViewModel.frc"
                                                                            placeholder="FRC">
                                                                    </div>
                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1" class="form-label">AR
                                                                            Type</label>
                                                                        <select id="artype" name="artype"
                                                                            [(ngModel)]="_citationViewModel.artype"
                                                                            class="form-select selectcontrol">
                                                                            <option
                                                                                *ngFor="let _arty of _areaTypeDataList"
                                                                                value="{{_arty?.code}}">
                                                                                {{_arty?.value}}</option>
                                                                        </select>
                                                                    </div>

                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1"
                                                                            class="form-label">FOBJ</label>
                                                                        <input type="text" class="form-control"
                                                                            id="ffbj" name="ffbj"
                                                                            [(ngModel)]="_citationViewModel.ffbj"
                                                                            placeholder="ffbj">
                                                                    </div>


                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1"
                                                                            class="form-label">Amount</label>
                                                                        <input type="text" class="form-control"
                                                                            id="amount" name="amount"
                                                                            [(ngModel)]="_citationViewModel.amount"
                                                                            placeholder="Amount">
                                                                    </div>

                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1" class="form-label">REF
                                                                            #1</label>
                                                                        <input type="text" class="form-control"
                                                                            id="ref1" name="ref1"
                                                                            [(ngModel)]="_citationViewModel.ref1"
                                                                            placeholder="REF #1">
                                                                    </div>


                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1" class="form-label">REF
                                                                            #2</label>
                                                                        <input type="text" class="form-control"
                                                                            id="ref2" name="ref2"
                                                                            [(ngModel)]="_citationViewModel.ref2"
                                                                            placeholder="REF #2">
                                                                    </div>

                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="input1" class="form-label">Cited
                                                                            By</label>
                                                                        <select id="citiedbyid" name="citiedbyid"
                                                                            [(ngModel)]="_citationViewModel.citiedById"
                                                                            class="form-select selectcontrol"
                                                                            placeholder="Choose ...">
                                                                            <option *ngFor="let _pt of _inspectorList"
                                                                                value="{{_pt.id}}">
                                                                                {{_pt?.name}}</option>
                                                                        </select>
                                                                    </div>
                                                                </form>
                                                                <div class="col-lg-12  col-md-12  col-sm-12">
                                                                    <label for="input2"
                                                                        class="form-label">Comments</label>
                                                                    <textarea type="text" class="form-control"
                                                                        id="citiationComments" name="citiationComments"
                                                                        [(ngModel)]="_citationViewModel.citiationComments"
                                                                        placeholder=""> </textarea>
                                                                </div>

                                                                <div class="col-lg-12 col-sm-12 mt-3">
                                                                    <label for="input1" class="form-label">Violation
                                                                        Table</label>
                                                                    <table id="tblinputdata"
                                                                        class="table table-striped table-bordered datatable"
                                                                        style="width:100%;">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Check Box</th>
                                                                                <th>Violation Category</th>
                                                                                <th>Short Description</th>
                                                                                <th>Status</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>

                                                                        </tbody>
                                                                    </table>
                                                                </div>

                                                                <div class="col-12 mt-3 mb-3">
                                                                    <div class="d-flex justify-content-between gap-3">
                                                                        <button
                                                                            class="btn btn-outline-secondary btn-sm px-4 float-end  me-2"
                                                                            (click)="cancelAction()"><i
                                                                                class="bx bx-left-arrow-alt me-2"></i>Cancel</button>
                                                                        <button class="btn custom-btn px-4"
                                                                            (click)="saveAction()">
                                                                            Save</button>
                                                                    </div>
                                                                </div>
                                                                <!-- Citation Ends Here -->

                                                            </div>


                                                            <div class="tab-pane fade" id="taskDetail" role="tabpanel">

                                                                <!-- Task Starts Here -->

                                                                <h6 class="mb-0 text-uppercase">Task Information</h6>
                                                                <hr />
                                                                <form class="row g-3">
                                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                                        <label for="input1" class="form-label">Start
                                                                            Date
                                                                            #</label>
                                                                        <input type="date" class="form-control"
                                                                            id="startDate" name="startDate"
                                                                            [(ngModel)]="_actionLogTypeViewModel.startDate"
                                                                            placeholder="Start Date" />
                                                                    </div>
                                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                                        <label for="input1" class="form-label">Start
                                                                            Date
                                                                            #</label>
                                                                        <input type="date" class="form-control"
                                                                            id="endDate" name="endDate"
                                                                            [(ngModel)]="_actionLogTypeViewModel.endDate"
                                                                            placeholder="End Date" />
                                                                    </div>

                                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                                        <label for="input1" class="form-label">Subject
                                                                            #</label>
                                                                        <input type="text" class="form-control"
                                                                            id="subject" name="subject"
                                                                            [(ngModel)]="_actionLogTypeViewModel.subject"
                                                                            placeholder="Subject" />
                                                                    </div>

                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="taskStatus" class="form-label">Task
                                                                            Status</label>
                                                                        <select id="taskStatus" name="taskStatus"
                                                                            [(ngModel)]="_actionLogTypeViewModel.taskStatus"
                                                                            class="form-select selectcontrol">
                                                                            <option
                                                                                *ngFor="let _arty of _taskStatusTypeDataList"
                                                                                value="{{_arty?.code}}">
                                                                                {{_arty?.value}}</option>
                                                                        </select>
                                                                    </div>




                                                                </form>

                                                                <div class="col-12 mt-3 mb-3">
                                                                    <div class="d-flex justify-content-between gap-3">
                                                                        <button
                                                                            class="btn btn-outline-secondary btn-sm px-4 float-end  me-2"
                                                                            (click)="cancelAction()"><i
                                                                                class="bx bx-left-arrow-alt me-2"></i>Cancel</button>
                                                                        <button class="btn custom-btn px-4"
                                                                            (click)="saveAction()">
                                                                            Save</button>
                                                                    </div>
                                                                </div>


                                                                <!-- Task Ends Here -->









                                                            </div>


                                                            <div class="tab-pane fade" id="appointmentInformation"
                                                                role="tabpanel">

                                                                <!-- Appointment Starts Here -->

                                                                <h6 class="mb-0 text-uppercase">Appointment Information
                                                                </h6>
                                                                <hr />

                                                                <form class="row g-3">
                                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                                        <label for="input1" class="form-label">Start
                                                                            Date
                                                                            #</label>
                                                                        <input type="date" class="form-control"
                                                                            id="startDate" name="startDate"
                                                                            [(ngModel)]="_actionLogAppointmentViewModel.startDate"
                                                                            placeholder="Start Date" />
                                                                    </div>
                                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                                        <label for="input1" class="form-label">Start
                                                                            Date
                                                                            #</label>
                                                                        <input type="date" class="form-control"
                                                                            id="endDate" name="endDate"
                                                                            [(ngModel)]="_actionLogAppointmentViewModel.endDate"
                                                                            placeholder="End Date" />
                                                                    </div>

                                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                                        <label for="input1" class="form-label">Subject
                                                                        </label>
                                                                        <input type="text" class="form-control"
                                                                            id="subject" name="subject"
                                                                            [(ngModel)]="_actionLogAppointmentViewModel.subject"
                                                                            placeholder="Subject" />
                                                                    </div>

                                                                    <div class="col-lg-3  col-sm-12">
                                                                        <label for="taskStatus"
                                                                            class="form-label">Location
                                                                        </label>
                                                                        <input type="text" class="form-control"
                                                                            id="location" name="location"
                                                                            [(ngModel)]="_actionLogAppointmentViewModel.location"
                                                                            placeholder="location" />

                                                                    </div>




                                                                </form>

                                                                <div class="col-12 mt-3 mb-3">
                                                                    <div class="d-flex justify-content-between gap-3">
                                                                        <button
                                                                            class="btn btn-outline-secondary btn-sm px-4 float-end  me-2"
                                                                            (click)="cancelAction()"><i
                                                                                class="bx bx-left-arrow-alt me-2"></i>Cancel</button>
                                                                        <button class="btn custom-btn px-4"
                                                                            (click)="saveAction()">
                                                                            Save</button>
                                                                    </div>
                                                                </div>


                                                                <!-- Appointment Ends Here -->



                                                            </div>




                                                            <div class="tab-pane fade" id="pictureContent"
                                                                role="tabpanel">

                                                                <div id="pictureList">
                                                                    <a class="btn custom-btn btn-sm"
                                                                        (click)="addNewPicture()">
                                                                        Add New
                                                                    </a>
                                                                    <div class="image-row pt-3">
                                                                        <div class="image-set">
                                                                            <div class="row">
                                                                                <div class="col-md-2" *ngFor="let _caf of pictures">
                                                                                    <!-- Lightbox2 integration -->
                                                                                    <a class="gallery-image-thumb-link"
                                                                                        id="imageViewer"
                                                                                        href="{{getImageURL(_caf)}}"
                                                                                        data-fancybox="gallery"
                                                                                        [attr.data-caption]="_caf?.description"
                                                                                        data-options='{"modal": true}'>
                                                                                        <img class="gallery-image-thumb"
                                                                                            src="{{getImageURL(_caf)}}"
                                                                                            alt="{{_caf?.description}}">
                                                                                    </a>
                                                                                    <div class="row">
                                                                                        <div class="col-md-12">
                                                                                            <!-- Edit and Delete actions -->
                                                                                            <a class="cursor-pointer" (click)="editPicture(_caf)">
                                                                                                <i class="bx bxs-comment-edit float-start cursor-pointer font-18" style="color:#008cff"></i>
                                                                                            </a>
                                                                                            <a class="cursor-pointer" (click)="deletePicture(_caf)">
                                                                                                <i class="bx bx-trash float-end font-18" style="color:red"></i>
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    <!-- <div class="image-row pt-3">
                                                                        <div class="image-set">
                                                                            <div class="row">
                                                                                <div class="col-md-1"
                                                                                    *ngFor="let _caf of pictures">

                                                                                    <a class="gallery-image-thumb-link"
                                                                                        id="imageViewer"
                                                                                        href="{{getImageURL(_caf)}}"
                                                                                        data-lightbox="example-set"
                                                                                        data-title="{{_caf?.description}}"><img
                                                                                            class="gallery-image-thumb"
                                                                                            src="{{getImageURL(_caf)}}"
                                                                                            alt="{{_caf?.description}}">
                                                                                    </a>
                                                                                    <div class="row">
                                                                                        <div class="col-md-12">
                                                                                            <a class="cursor-pointer"
                                                                                                (click)="editPicture(_caf)"><i
                                                                                                    class="bx bxs-comment-edit float-start cursor-pointer font-18"
                                                                                                    style="color:#008cff"></i></a>
                                                                                            <a class="cursor-pointer"><i
                                                                                                    class="bx bx-trash float-end font-18 "
                                                                                                    style="color:red"></i></a>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div> -->
                                                                    <!-- <a class="image-gallery-link"
                                                                        href="assets/images/gallery/23.png"
                                                                        data-lightbox="example-1"><img
                                                                            class="gallery-image-thumb"
                                                                            src="assets/images/gallery/23.png"
                                                                            alt="Girl looking out people on beach"></a> -->
                                                                </div>


                                                            </div>

                                                            <div class="tab-pane fade" id="audioContent"
                                                                role="tabpanel">
                                                                <!-- style="margin-top:-100px" -->
                                                                <div id="audioList">
                                                                    <a class="btn custom-btn btn-sm"
                                                                        (click)="addNewAudio()">
                                                                        Add New
                                                                    </a>
                                                                    <div class="row pt-3">
                                                                        <div class="col-md-3"
                                                                            *ngFor="let _caf of audios">

                                                                            <audio controls>
                                                                                <source src="{{getImageURL(_caf)}}"
                                                                                    type="audio/mpeg">
                                                                                Your browser does not support
                                                                                the audio tag.
                                                                            </audio>
                                                                            <div class="row">
                                                                                <div class="col-md-12">
                                                                                    <a class="cursor-pointer"
                                                                                        (click)="editAudio(_caf)"><i
                                                                                            class="bx bxs-comment-edit float-start cursor-pointer font-18"
                                                                                            style="color:#008cff"></i></a>
                                                                                    <a class="cursor-pointer"><i
                                                                                            class="bx bx-trash float-end font-18 "
                                                                                            style="color:red"></i></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="tab-pane fade" id="videoContent"
                                                                role="tabpanel">
                                                                <!-- style="margin-top:-175px" -->
                                                                <div id="videoList">
                                                                    <a class="btn custom-btn btn-sm"
                                                                        (click)="addNewVideo()">
                                                                        Add New
                                                                    </a>
                                                                    <div class="row pt-3">
                                                                        <div class="col-md-4"
                                                                            *ngFor="let _caf of videos">

                                                                            <video controls width="500px">
                                                                                <source src="{{getImageURL(_caf)}}"
                                                                                    type="audio/mpeg">
                                                                                Your browser does not support
                                                                                the audio tag.
                                                                            </video>
                                                                            <div class="row">
                                                                                <div>
                                                                                    <a class="cursor-pointer col-md-3"
                                                                                        (click)="editVideo(_caf)"><i
                                                                                            class="bx bxs-comment-edit float-start cursor-pointer font-18"
                                                                                            style="color:#008cff"></i></a>
                                                                                    <a class="cursor-pointer"><i
                                                                                            class="bx bx-trash float-end font-18 "
                                                                                            style="color:red"></i></a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>




                                                            <div class="tab-pane fade" id="inspectionViolationContent"
                                                                role="tabpanel">
                                                                <div class="row">



                                                                    <div>
                                                                        <div>
                                                                            <ul class="nav nav-tabs nav-primary"
                                                                                role="tablist">
                                                                                <li class="nav-item"
                                                                                    role="presentation">
                                                                                    <a class="nav-link active"
                                                                                        data-bs-toggle="tab"
                                                                                        href="#inspection-violation-list"
                                                                                        role="tab" aria-selected="true">
                                                                                        <div
                                                                                            class="d-flex align-items-center">
                                                                                            <div class="tab-icon"><i
                                                                                                    class="bx bx-home font-18 me-1"></i>
                                                                                            </div>
                                                                                            <div class="tab-title">
                                                                                                Violation List</div>
                                                                                        </div>
                                                                                    </a>
                                                                                </li>
                                                                                <li class="nav-item" role="presentation"
                                                                                    id="addOrEditInspectionViolation">
                                                                                    <a class="nav-link"
                                                                                        data-bs-toggle="tab"
                                                                                        href="#inspection-violation-add-edit"
                                                                                        role="tab" aria-selected="false"
                                                                                        tabindex="-1">
                                                                                        <div
                                                                                            class="d-flex align-items-center">
                                                                                            <div class="tab-icon"><i
                                                                                                    class="bx bx-user-pin font-18 me-1"></i>
                                                                                            </div>
                                                                                            <div class="tab-title">Add
                                                                                                or Edit Violation</div>
                                                                                        </div>
                                                                                    </a>
                                                                                </li>
                                                                            </ul>
                                                                            <div class="tab-content py-3">
                                                                                <div class="tab-pane fade show active"
                                                                                    id="inspection-violation-list"
                                                                                    role="tabpanel">
                                                                                    <div
                                                                                        class="col-lg-12  col-md-12  col-sm-12">
                                                                                        <div class="row">
                                                                                            <div class="col-md-6">
                                                                                                <h6 class="mb-0">
                                                                                                    List of Violations
                                                                                                </h6>
                                                                                            </div>
                                                                                            <div class="col-md-6">
                                                                                                <button
                                                                                                    class="btn custom-btn px-4 float-end btn-sm ms-1"
                                                                                                    (click)="addInspectionViolation()">Add
                                                                                                    New
                                                                                                    Violation</button>
                                                                                            </div>
                                                                                        </div>
                                                                                        <hr />
                                                                                        <table
                                                                                            class="table mb-0 table-striped">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th scope="col">#
                                                                                                    </th>
                                                                                                    <th>Violation
                                                                                                        Category</th>
                                                                                                    <th>Violation Code
                                                                                                    </th>
                                                                                                    <th>Short
                                                                                                        Description</th>
                                                                                                    <th scope="col">
                                                                                                        Corrective
                                                                                                        Action</th>
                                                                                                    <th scope="col">
                                                                                                        Status</th>
                                                                                                    <th scope="col">
                                                                                                        Actions</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                <tr
                                                                                                    *ngFor="let _cv of _caseDetail?.caseViolation; let i = index">
                                                                                                    <td><a
                                                                                                            href="">{{i+1}}</a>
                                                                                                    </td>
                                                                                                    <td>{{_cv?.violation}}
                                                                                                    </td>
                                                                                                    <td>{{_cv?.municode}}
                                                                                                    </td>
                                                                                                    <td>{{_cv?.description}}
                                                                                                    </td>
                                                                                                    <td>{{_cv?.correctiveaction}}
                                                                                                    </td>
                                                                                                    <td>{{_cv?.violationstatus}}
                                                                                                    </td>
                                                                                                    <td>
                                                                                                        <button
                                                                                                            id="btnEdit"
                                                                                                            class="btn custom-btn btn-sm"
                                                                                                            (click)="editActionViolation(_cv)">Edit</button>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="tab-pane fade"
                                                                                    id="inspection-violation-add-edit"
                                                                                    role="tabpanel">

                                                                                    <div id="frmViolation" class="row">
                                                                                        <div
                                                                                            class="col-lg-3  col-md-6  col-sm-12">
                                                                                            <h6
                                                                                                class="mb-0 text-uppercase">
                                                                                                Add or Edit Violation
                                                                                            </h6>
                                                                                            <hr />
                                                                                            <div
                                                                                                class="col-lg-12 col-md-12 col-sm-12 mt-1 mb-1">
                                                                                                <input type="text"
                                                                                                    class="form-control"
                                                                                                    id="input1"
                                                                                                    name="searchText"
                                                                                                    [(ngModel)]="searchText"
                                                                                                    (keyup)="search()"
                                                                                                    placeholder="Search Violation . . .">
                                                                                            </div>
                                                                                            <div id="inspectionViolationList"
                                                                                                style="height:400px;max-height: 400px;overflow-y: scroll;"
                                                                                                class="demo">
                                                                                            </div>
                                                                                        </div>
                                                                                        <div
                                                                                            class="col-lg-9  col-md-6  col-sm-12">
                                                                                            <h6
                                                                                                class="mb-0 text-uppercase">
                                                                                                Violation Details</h6>
                                                                                            <hr />
                                                                                            <form class="row g-3">
                                                                                                <div
                                                                                                    class="col-lg-3 col-md-6 col-sm-12">
                                                                                                    <label for="input1"
                                                                                                        class="form-label">Violation</label>
                                                                                                    <input type="text"
                                                                                                        class="form-control"
                                                                                                        id="violation"
                                                                                                        name="violation"
                                                                                                        [(ngModel)]="_caseViolationViewModel.violation"
                                                                                                        placeholder="violation" />
                                                                                                    <input type="hidden"
                                                                                                        class="form-control"
                                                                                                        id="id"
                                                                                                        name="id" />
                                                                                                </div>

                                                                                                <div
                                                                                                    class="col-lg-3  col-md-12  col-sm-12">
                                                                                                    <label for="input3"
                                                                                                        class="form-label">Muni
                                                                                                        Code</label>
                                                                                                    <input type="text"
                                                                                                        class="form-control"
                                                                                                        id="municode"
                                                                                                        name="municode"
                                                                                                        [(ngModel)]="_caseViolationViewModel.municode"
                                                                                                        placeholder="Muni Code">
                                                                                                </div>
                                                                                                <div
                                                                                                    class="col-lg-3  col-sm-12">
                                                                                                    <label for="input1"
                                                                                                        class="form-label">Area</label>
                                                                                                    <select id="area"
                                                                                                        name="area"
                                                                                                        [(ngModel)]="_caseViolationViewModel.area"
                                                                                                        class="form-select selectcontrol">
                                                                                                        <option
                                                                                                            *ngFor="let _at of _areaTypeDataList"
                                                                                                            value="{{_at?.code}}">
                                                                                                            {{_at?.value}}
                                                                                                        </option>
                                                                                                    </select>
                                                                                                </div>
                                                                                                <div
                                                                                                    class="col-lg-3  col-sm-12">
                                                                                                    <label for="input1"
                                                                                                        class="form-label">Priority</label>
                                                                                                    <select
                                                                                                        id="priority"
                                                                                                        name="priority"
                                                                                                        [(ngModel)]="_caseViolationViewModel.priority"
                                                                                                        class="form-select selectcontrol">
                                                                                                        <option
                                                                                                            *ngFor="let _pty of _priorityTypeDataList"
                                                                                                            value="{{_pty?.code}}">
                                                                                                            {{_pty?.value}}
                                                                                                        </option>
                                                                                                    </select>
                                                                                                </div>

                                                                                                <div
                                                                                                    class="col-lg-3  col-md-12  col-sm-12">
                                                                                                    <label for="input3"
                                                                                                        class="form-label">Open
                                                                                                        Date</label>
                                                                                                    <input type="date"
                                                                                                        class="form-control"
                                                                                                        id="opendate"
                                                                                                        name="opendate"
                                                                                                        [(ngModel)]="_caseViolationViewModel.opendate"
                                                                                                        placeholder="Open Date">
                                                                                                </div>
                                                                                                <div
                                                                                                    class="col-lg-3  col-md-12  col-sm-12">
                                                                                                    <label for="input3"
                                                                                                        class="form-label">Due
                                                                                                        Date</label>
                                                                                                    <input type="date"
                                                                                                        class="form-control"
                                                                                                        id="duedate"
                                                                                                        name="duedate"
                                                                                                        [(ngModel)]="_caseViolationViewModel.duedate"
                                                                                                        placeholder="Due Date">
                                                                                                </div>
                                                                                                <div
                                                                                                    class="col-lg-3  col-md-12  col-sm-12">
                                                                                                    <label for="input3"
                                                                                                        class="form-label">Close
                                                                                                        Date</label>
                                                                                                    <input type="date"
                                                                                                        class="form-control"
                                                                                                        id="closedate"
                                                                                                        name="closedate"
                                                                                                        [(ngModel)]="_caseViolationViewModel.closedate"
                                                                                                        placeholder="Close Date">
                                                                                                </div>
                                                                                                <div
                                                                                                    class="col-lg-3  col-md-6  col-sm-12">
                                                                                                    <label for="input2"
                                                                                                        class="form-label">Status</label>
                                                                                                    <select
                                                                                                        id="violationstatus"
                                                                                                        name="violationstatus"
                                                                                                        class="form-select selectcontrol"
                                                                                                        [(ngModel)]="_caseViolationViewModel.violationstatus">
                                                                                                        <option
                                                                                                            *ngFor="let _pty of _violationStatusTypeDataList"
                                                                                                            value="{{_pty?.code}}">
                                                                                                            {{_pty?.value}}
                                                                                                        </option>
                                                                                                    </select>
                                                                                                </div>
                                                                                            </form>
                                                                                            <div
                                                                                                class="col-lg-12  col-md-12  col-sm-12">
                                                                                                <label for="input2"
                                                                                                    class="form-label">Description</label>
                                                                                                <textarea type="text"
                                                                                                    class="form-control"
                                                                                                    id="description"
                                                                                                    name="description"
                                                                                                    #description="ngModel"
                                                                                                    [(ngModel)]="_caseViolationViewModel.description"
                                                                                                    placeholder=""> </textarea>
                                                                                            </div>
                                                                                            <div
                                                                                                class="col-lg-12  col-md-12  col-sm-12">
                                                                                                <label for="input2"
                                                                                                    class="form-label">Corrective
                                                                                                    Actions</label>
                                                                                                <textarea type="text"
                                                                                                    class="form-control"
                                                                                                    id="correctiveaction"
                                                                                                    name="correctiveaction"
                                                                                                    [(ngModel)]="_caseViolationViewModel.correctiveaction"
                                                                                                    placeholder=""> </textarea>
                                                                                            </div>
                                                                                            <div
                                                                                                class="col-12 mt-3 mb-3">
                                                                                                <div
                                                                                                    class="d-flex justify-content-between gap-3">
                                                                                                    <button
                                                                                                        class="btn btn-outline-secondary btn-sm px-4 float-end  me-2"
                                                                                                        (click)="cancelViolationAction()"><i
                                                                                                            class="bx bx-left-arrow-alt me-2"></i>Cancel</button>
                                                                                                    <button
                                                                                                        class="btn custom-btn px-4"
                                                                                                        (click)="saveViolationAction()">
                                                                                                        Save</button>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>





















                                                                </div>
                                                            </div>
                                                            <div class="tab-pane fade" id="followUpActionContent"
                                                                role="tabpanel">
                                                                <div class="col-lg-12  col-md-12  col-sm-12">
                                                                    <hr />
                                                                    <form class="row g-3">
                                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                                            <label for="input1"
                                                                                class="form-label">Actions</label>
                                                                            <select id="actionCode" name="actionCode"
                                                                                [(ngModel)]="_followupActionLogViewModel.actionCode"
                                                                                class="form-select">
                                                                                <option
                                                                                    *ngFor="let _at of _actionListDataList"
                                                                                    value="{{_at?.actionCode}}">
                                                                                    {{_at?.actionDescription}}</option>
                                                                            </select>
                                                                            <input type="hidden" class="form-control"
                                                                                id="id" name="id" />
                                                                        </div>

                                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                                            <label for="input1"
                                                                                class="form-label">Category</label>
                                                                            <select id="actionType" name="actionType"
                                                                                [(ngModel)]="_followupActionLogViewModel.actionType"
                                                                                class="form-select">
                                                                                <option
                                                                                    *ngFor="let _at of _actionTypeDataList"
                                                                                    value="{{_at?.code}}">
                                                                                    {{_at?.value}}</option>
                                                                            </select>
                                                                        </div>

                                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                                            <label for="input1" class="form-label">Route
                                                                                To</label>
                                                                            <select id="routeToInspectorId"
                                                                                name="routeToInspectorId"
                                                                                [(ngModel)]="_followupActionLogViewModel.routeToInspectorId"
                                                                                class="form-select">
                                                                                <option
                                                                                    *ngFor="let _rtu of _inspectorList"
                                                                                    value="{{_rtu.id}}">
                                                                                    {{_rtu?.name}}</option>
                                                                            </select>
                                                                        </div>

                                                                        <div class="col-lg-3 col-md-6 col-sm-12">
                                                                            <label for="input1"
                                                                                class="form-label">Date</label>
                                                                            <input type="date" class="form-control"
                                                                                id="createdOn" name="createdOn"
                                                                                [(ngModel)]="_followupActionLogViewModel.createdOn" />
                                                                        </div>





                                                                        <div class="col-lg-12  col-md-12  col-sm-12">
                                                                            <label for="input2"
                                                                                class="form-label">Comments</label>
                                                                            <textarea type="text" class="form-control"
                                                                                id="comments" name="comments"
                                                                                [(ngModel)]="_followupActionLogViewModel.comments"> </textarea>
                                                                        </div>
                                                                    </form>

                                                                    <div class="col-12 mt-3 mb-3">
                                                                        <div
                                                                            class="d-flex justify-content-between gap-3">
                                                                            <button
                                                                                class="btn btn-outline-secondary btn-sm px-4 float-end  me-2"
                                                                                (click)="cancelAction()"><i
                                                                                    class="bx bx-left-arrow-alt me-2"></i>Cancel</button>
                                                                            <button class="btn custom-btn px-4"
                                                                                (click)="saveAction()">
                                                                                Save</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-12 mt-3 mb-3">
                                                            <div class="d-flex justify-content-between gap-3">
                                                                <button
                                                                    class="btn btn-outline-secondary btn-sm px-4 float-end  me-2"
                                                                    (click)="cancelAction()"><i
                                                                        class="bx bx-left-arrow-alt me-2"></i>Cancel</button>
                                                                <button class="btn custom-btn px-4"
                                                                    [hidden]="_actionLogViewModel.actionType=='C' || _actionLogViewModel.actionType=='T' || _actionLogViewModel.actionType=='A' || _actionLogViewModel.actionType=='I'"
                                                                    (click)="saveAction()">
                                                                    Save</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12" id="navigationAction">
                                <div class="d-flex justify-content-between gap-3">
                                    <button class="btn custom-btn px-4" (click)="previousTab(5)"><i
                                            class="bx bx-left-arrow-alt me-2"></i>Previous</button>
                                    <button class="btn btn-success px-4" onclick="stepper1.next()">Submit</button>
                                </div>
                            </div>
                        </div><!---end row-->

                    </div>
                    <!-- Action Ends Here -->
                </form>
            </div>

        </div>
    </div>
</div>


<div class="row">
    <a href="#" class="float d-none text-center" style="font-size: 1.5rem;margin-top: 14px;">
        <i class="fa fa-save my-float"></i>
    </a>
</div>

<div class="modal fade" id="dueDateComments" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-x1">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    Reason (Due Date Change)
                </h5>
                <button type="button" class="btn-close" (click)="closeReason('dueDate')" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <label for="comments" class="mt-2">Reason</label>
                <textarea type="text" class="form-control" id="dueDateReason" name="comments"></textarea>
                <span class="text-danger" id="reason-mandate"></span>

                <div class="d-flex justify-content-between align-items-center w-100 mt-2">
                <p class="mb-0 fw-bold">{{_user.name}}</p>
                <p class="mb-0 fw-bold">{{formattedDate}}</p>
                </div>
            
                <!-- <div class="d-table w-100 mt-2">
                    <div class="d-table-row">
                        <div class="d-table-cell text-end pe-3 fw-bold">Name:</div>
                        <div class="d-table-cell">{{_user.name}}</div>
                    </div>
                    <div class="d-table-row">
                        <div class="d-table-cell text-end pe-3 fw-bold">Current Date:</div>
                        <div class="d-table-cell">{{formattedDate}}</div>
                    </div>
                </div> -->
            </div>
            
            
            
            <div class="modal-footer justify-content-between">
                <button type="button" id="btnMDPClose" class="btn btn-danger" (click)="closeReason('dueDate')">Close</button>
                <button type="button" class="btn custom-btn" (click)="saveReason('dueDate')">Save</button>
            </div>
        </div>
    </div>
</div>

<div class="offcanvas offcanvas-end" tabindex="-1" data-bs-backdrop="static" id="showComments">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Comments</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column">
        <div class="table-responsive flex-grow-1">
            <table class="table">
                <colgroup>
                    <col span="1" style="width: 70%;">
                    <col span="1" style="width: 30%;">
                </colgroup>
                <tbody *ngFor="let d of dataComments">
                    <tr>
                        <td rowspan="2" class="fs-5"><strong>Reason:</strong><br>{{d.comment}}</td>
                        <td class="vertical-divider"><strong>Updated By:</strong><br>{{d.updatedBy}}</td>
                    </tr>
                    <tr>
                        <td class="vertical-divider"><strong>Updated On:</strong><br>{{d.updatedOn}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
</div>





<div class="modal fade" id="SearchResultAddress" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Address Search Result - 11111</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <table class="table mb-0 table-striped" id="addressList" style="width:100%">
                    <thead>
                        <tr>
                            <th scope="col">APN</th>
                            <th scope="col">Owner Name</th>
                            <th scope="col">Street</th>
                            <th scope="col">District</th>
                            <th scope="col">State</th>
                            <th scope="col">Zipcode</th>
                            <th scope="col" width="150px">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let _asr of _addressSearchResultDataList">
                            <td><a (click)="selectAddress(_asr)" href="#" title="Add complaint">{{_asr?.apn}}</a></td>
                            <td>{{_asr?.ownerName}}</td>
                            <td>{{_asr?.streetNumber}} {{_asr?.streetName}} {{_asr?.streettype}}</td>
                            <td>{{_asr?.district}}</td>
                            <td>{{_asr?.state}}</td>
                            <td>{{_asr?.zip}}</td>
                            <td><a class="btn custom-btn mb-3 mb-lg-0 btn-sm" (click)="selectAddress(_asr)"
                                    id="btnSaveAll">Sele</a>&nbsp;<a class="btn custom-btn btn-sm mb-3 mb-lg-0"
                                    (click)="viewAddress(_asr)" id="btnSaveAll">View</a></td>
                        </tr>
                    </tbody>
                </table>
                <div id="addressDetail">
                    <div class="row">
                        <div class="col-md-6">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">APN</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.apn}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Unit Number</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.unitnumber}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Owner Name</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.ownername}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Owner City State Zip</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.ownercitystatezip}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Owner Street</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.ownerstreet}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Owner Phone</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.ownerphone}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Other Name</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.othername}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Street Number</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.streetnumber}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Street Direction</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.streetdirection}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Street Name</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.streetname}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Street Type</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.streettype}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">District</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.district}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">City</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.city}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">State</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.state}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Zip</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.zip}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Census Tract</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.censustract}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Tax Rate Area</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.taxratearea}}</span>
                                </li>

                            </ul>
                        </div>
                        <div class="col-md-5">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Map Coordinates</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.mapcoordinates}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">People RSN Amanda</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.peoplersnamanda}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">People RSN</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.peoplersn}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Property RSN Amanda</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.propertyrsnamanda}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">In Amanda</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.inamanda}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Amanda District</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.amandadistrict}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Lot Number</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.lotno}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Other Address</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.otheraddress}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Building Permit Number</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.buildingpermitnumber}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Housing Permit Number</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.housingpermitnumber}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Other City State Zip</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.othercitystatezip}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Tract Number</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.tractno}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Property RSN</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.propertyrsn}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Number of Units</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.numberofunits}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Comments</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.comments}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Status</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.status}}</span>
                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0">Stamp Date</h6>
                                    <span class="text-secondary">{{_viewAddressDetail?.stampdate}}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button type="button" class="btn custom-btn btn-sm" (click)="showAddressList()">Show
                                List</button>
                        </div>
                        <div class="col-md-6">
                            <button type="button" class="btn custom-btn btn-sm float-end"
                                (click)="selectedAddress()">Select</button>
                        </div>

                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn custom-btn" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>




<div class="modal fade" id="pictureUploadMDL" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Upload Picture</h5>
                <button type="button" class="btn-m-d-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <div class="col-lg-3 col-md-6 col-sm-12">
                    <label for="input1" class="form-label">Choose Picture</label>
                    <input type="file" class="form-control" id="uploadPicture" name="uploadPicture"
                        accept="image/png, image/gif, image/jpeg" (change)="onPictureChange($event)" />
                </div>
                <div class="row">
                    <img [src]="imgData" width="400px" />
                </div>
                <div class="row">
                    <div class="col-lg-12  col-sm-12">
                        <label for="input1" class="form-label">Description</label>
                        <textarea id="_pictureDescription" name="_pictureDescription" [(ngModel)]="_pictureDescription"
                            class="form-control"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnMDPClose" class="btn custom-btn" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn custom-btn" (click)="addPictureToList()">Save</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="updatePictureUploadMDL" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Upload Picture</h5>
                <button type="button" class="btn-m-d-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <div class="col-lg-3 col-md-6 col-sm-12">
                    <label for="input1" class="form-label">Choose Picture</label>
                    <input type="file" class="form-control" id="uploadPicture" name="uploadPicture"
                        accept="image/png, image/gif, image/jpeg" (change)="onPictureChange($event)" />
                </div>
                <div class="row">
                    <img [src]="imgData" width="400px" />
                </div>
                <div class="row">
                    <div class="col-lg-12  col-sm-12">
                        <label for="input1" class="form-label">Description</label>
                        <textarea id="_pictureDescription" name="_pictureDescription" [(ngModel)]="_pictureDescription"
                            class="form-control"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnPictureMDPClose" class="btn custom-btn"
                    data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn custom-btn" (click)="updatePictureToList()">Save</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="audioUploadMDL" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Upload Audio</h5>
                <button type="button" class="btn-m-d-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <div class="col-lg-3 col-md-6 col-sm-12">
                    <label for="input1" class="form-label">Choose Audio</label>
                    <input type="file" class="form-control" id="uploadAudio" name="uploadAudio" accept=".mp3,audio/*"
                        (change)="onAudioChange($event)" />
                </div>
                <div class="row">
                    <audio controls="controls" [src]="audioData" autobuffer="autobuffer" autoplay="autoplay">
                        Your browser does not support
                        the audio tag.
                    </audio>

                </div>
                <div class="row">
                    <div class="col-lg-12  col-sm-12">
                        <label for="input1" class="form-label">Description</label>
                        <textarea id="_pictureDescription" name="_pictureDescription" [(ngModel)]="_pictureDescription"
                            class="form-control"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnMDAClose" class="btn custom-btn" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn custom-btn" (click)="addAudioToList()">Save</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="videoUploadMDL" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Upload Video</h5>
                <button type="button" class="btn-m-d-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <div class="col-lg-3 col-md-6 col-sm-12">
                    <label for="input1" class="form-label">Choose Video</label>
                    <input type="file" class="form-control" id="uploadVideo" name="uploadVideo"
                        accept="video/mp4,video/x-m4v,video/*" (change)="onVideoChange($event)" />
                </div>
                <div class="row">
                    <video controls="controls" [src]="videoData" autobuffer="autobuffer" autoplay="autoplay">
                        Your browser does not support
                        the video tag.
                    </video>

                </div>
                <div class="row">
                    <div class="col-lg-12  col-sm-12">
                        <label for="input1" class="form-label">Description</label>
                        <textarea id="_pictureDescription" name="_pictureDescription" [(ngModel)]="_pictureDescription"
                            class="form-control"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnMDVClose" class="btn custom-btn" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn custom-btn" (click)="addVideoToList()">Save</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="mapAddressList" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Map Address Search Result</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <table class="table mb-0 table-striped" id="addressList" style="width:100%">
                    <thead>
                        <tr>
                            <!-- <th scope="col">Address</th>
                            <th scope="col">Owner Name</th>
                            <th scope="col">Street</th>
                            <th scope="col">District</th>
                            <th scope="col">State</th> -->
                            <th scope="col">Address</th>
                            <th scope="col" width="150px">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let _asr of _mapAddressList">
                            <!-- <td><a (click)="selectAddress(_asr)" href="#" title="Add complaint">{{_asr?.apn}}</a></td>
                            <td>{{_asr?.ownerName}}</td>
                            <td>{{_asr?.streetNumber}} {{_asr?.streetName}} {{_asr?.streettype}}</td>
                            <td>{{_asr?.district}}</td>
                            <td>{{_asr?.state}}</td> -->
                            <td>{{_asr}}</td>
                            <td><a class="btn custom-btn mb-3 mb-lg-0 btn-sm" id="btnSaveAll">Select</a>&nbsp;<a
                                    class="btn custom-btn btn-sm mb-3 mb-lg-0" id="btnSaveAll">View</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn custom-btn" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<!-- Message Dialog Box  -->
<div class="modal fade" id="messageDialogBox" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirmation</h5>
                <button type="button" class="btn-m-d-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <span>{{_messageText}}</span>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnMDClose" class="btn custom-btn" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn custom-btn" (click)="createCaseInDraftMode()">Create Case</button>
            </div>
        </div>
    </div>
</div>

<!-- Message Dialog Box  -->
<div class="modal fade" id="messageEditDialogBox" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirmation</h5>
                <button type="button" class="btn-m-d-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <span>{{_messageText}}</span>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnMDClose" class="btn custom-btn" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn custom-btn" (click)="save()">Yes</button>
            </div>
        </div>
    </div>
</div>

<!-- Message Dialog Box  -->
<div class="modal fade" id="messageBox" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Message</h5>
                <button type="button" class="btn-m-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <span>{{_messageText}}</span>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn custom-btn" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="caseStatusModel" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Change Case Status</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12  col-sm-12">
                        <label for="input1" class="form-label">Case Status</label>
                        <select id="casestatus" name="casestatus" [(ngModel)]="_newCaseStatus"
                            class="form-select selectcontrol">

                            <option *ngFor="let _cst of this.getStatus()" value="{{_cst.code}}">
                                {{_cst?.value}}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnMDClose" class="btn custom-btn" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn custom-btn" (click)="changeCaseStatus()">Change Status</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="cuDateModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-x1">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    Reason (CU Date Change)
                </h5>
                <button type="button" class="btn-close" (click)="closeReason('cuDate')" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <label for="comments" class="mt-2">Reason</label>
                <textarea type="text" class="form-control" id="cuDateReason" name="comments"></textarea>
                <span class="text-danger" id="cu-reason-mandate"></span>

                <div class="d-flex justify-content-between align-items-center w-100 mt-2">
                <p class="mb-0 fw-bold">{{_user.name}}</p>
                <p class="mb-0 fw-bold">{{formattedDate}}</p>
                </div>
            
                <!-- <div class="d-table w-100 mt-2">
                    <div class="d-table-row">
                        <div class="d-table-cell text-end pe-3 fw-bold">Name:</div>
                        <div class="d-table-cell">{{_user.name}}</div>
                    </div>
                    <div class="d-table-row">
                        <div class="d-table-cell text-end pe-3 fw-bold">Current Date:</div>
                        <div class="d-table-cell">{{formattedDate}}</div>
                    </div>
                </div> -->
            </div>
            
            
            
            <div class="modal-footer justify-content-between">
                <button type="button" id="btnMDPClose" class="btn btn-danger" (click)="closeReason('cuDate')">Close</button>
                <button type="button" class="btn custom-btn" (click)="saveReason('cuDate')">Save</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Structure -->
<div class="modal fade" id="addNewModal" tabindex="-1" aria-labelledby="addNewModalLabel" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addNewModalLabel">Add New Entry</h5>
                <button type="button" class="btn-close" (click)="closeReason('notes')" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Modal Content -->
                <form id="addNewForm">
                    <div class="mb-3">
                        <label for="noteInput" class="form-label">Note Description<span class="text-danger">*</span></label>
                        <textarea class="form-control" id="noteInput" placeholder="Enter note" rows="4"></textarea>
                        <span class="text-danger" id="noteError"></span>
                    </div>
                    <div class="mb-3">
                        <label for="createdByInput" class="form-label">Created By</label>
                        <input type="text" class="form-control" id="createdByInput" name="Created By" [(ngModel)]="_userName" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="createdByInput" class="form-label">Date</label>
                        <input type="text" class="form-control" id="createdDate" name="Date" [(ngModel)]="formattedDate" readonly>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="closeReason('notes')">Close</button>
                <button type="button" class="btn btn-primary" id="saveButton" (click)="saveNotes()">Save</button>
            </div>
        </div>
    </div>
</div>
